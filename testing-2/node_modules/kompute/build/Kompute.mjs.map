{"version":3,"file":"Kompute.mjs","sources":["../js/core/Vector3D.js","../js/core/VectorPool.js","../js/core/MathUtils.js","../js/core/Box.js","../js/third-party/Nearby.js","../js/core/Quaternion.js","../js/core/Entity.js","../js/core/Vertex.js","../js/core/World.js","../js/core/Path.js","../js/core/Edge.js","../js/core/Graph.js","../js/core/MinHeap.js","../js/core/AStar.js","../js/debug/Logger.js","../js/steering/Steerable.js","../js/steering/SteerResult.js","../js/steering/JumpDescriptor.js","../js/steering/behavior/SteeringBehavior.js","../js/steering/behavior/SeekBehavior.js","../js/steering/behavior/ArriveBehavior.js","../js/steering/behavior/AvoidBehavior.js","../js/steering/behavior/BlendedSteeringBehavior.js","../js/steering/behavior/PursueBehavior.js","../js/steering/behavior/LookWhereYouAreGoingBehavior.js","../js/steering/behavior/Wander2DBehavior.js","../js/steering/behavior/Wander3DBehavior.js","../js/steering/behavior/FleeBehavior.js","../js/steering/behavior/EvadeBehavior.js","../js/steering/behavior/PathFollowingBehavior.js","../js/steering/behavior/PrioritySteeringBehavior.js","../js/steering/behavior/HideBehavior.js","../js/steering/behavior/RandomWaypointBehavior.js","../js/steering/behavior/SeparationBehavior.js","../js/steering/behavior/AlignBehavior.js","../js/steering/behavior/CohesionBehavior.js","../js/steering/behavior/JumpBehavior.js","../js/steering/behavior/RandomPathBehavior.js","../js/debug/DebugHelper.js"],"sourcesContent":["var Vector3D = function(x, y, z){\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n}\n\nVector3D.prototype.set = function(x, y, z){\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  return this;\n}\n\nVector3D.prototype.copy = function(vect){\n  return this.set(vect.x, vect.y, vect.z);\n}\n\nVector3D.prototype.clone = function(){\n  return (new Vector3D()).copy(this);\n}\n\nVector3D.prototype.multiplyScalar = function(scalar){\n  this.set(this.x * scalar, this.y * scalar, this.z * scalar);\n  return this;\n}\n\nVector3D.prototype.min = function(vect){\n  this.x = Math.min(this.x, vect.x);\n  this.y = Math.min(this.y, vect.y);\n  this.z = Math.min(this.z, vect.z);\n\n  return this;\n}\n\nVector3D.prototype.max = function(vect){\n  this.x = Math.max(this.x, vect.x);\n  this.y = Math.max(this.y, vect.y);\n  this.z = Math.max(this.z, vect.z);\n\n  return this;\n}\n\nVector3D.prototype.getLength = function(){\n  return Math.sqrt((this.x * this.x) + (this.y * this.y) + (this.z * this.z));\n}\n\nVector3D.prototype.add = function(vect){\n  this.x += vect.x;\n  this.y += vect.y;\n  this.z += vect.z;\n\n  return this;\n}\n\nVector3D.prototype.sub = function(vect){\n  this.x -= vect.x;\n  this.y -= vect.y;\n  this.z -= vect.z;\n\n  return this;\n}\n\nVector3D.prototype.normalize = function(){\n  var len = this.getLength();\n  if (len == 0){\n    return this;\n  }\n  this.x = this.x / len;\n  this.y = this.y / len;\n  this.z = this.z / len;\n\n  return this;\n}\n\nVector3D.prototype.dot = function(vect){\n  return (this.x * vect.x) + (this.y * vect.y) + (this.z * vect.z);\n}\n\nVector3D.prototype.applyQuaternion = function(quaternion){\n  var x = this.x, y = this.y, z = this.z;\n  var qx = quaternion.x, qy = quaternion.y, qz = quaternion.z, qw = quaternion.w;\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = - qx * x - qy * y - qz * z;\n  this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n  this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n  this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n  return this;\n}\n\nVector3D.prototype.cross = function(vec){\n  return this.set(this.y * vec.z - this.z * vec.y, this.z * vec.x - this.x * vec.z, this.x * vec.y - this.y * vec.x);\n}\n\nVector3D.prototype.negate = function(){\n  return this.set(-this.x, -this.y, -this.z);\n}\n\nVector3D.prototype.eql = function(vec){\n  return vec.x == this.x && vec.y == this.y && vec.z == this.z;\n}\n\nVector3D.prototype.toFixed = function(num){\n  return this.set(this.x.toFixed(num), this.y.toFixed(num), this.z.toFixed(num));\n}\n\nVector3D.prototype.getDistanceSq = function(vec){\n  var xDiff = this.x - vec.x;\n  var yDiff = this.y - vec.y;\n  var zDiff = this.z - vec.z;\n  \n  return (xDiff * xDiff) + (yDiff * yDiff) + (zDiff * zDiff);\n}\n\nexport { Vector3D };\n","import { Vector3D } from \"./Vector3D\";\n\nvar VectorPool = function(size){\n  this.index = 0;\n\n  this.vectors = [];\n  for (var i = 0; i < size; i ++){\n    this.vectors.push(new Vector3D());\n  }\n}\n\nVectorPool.prototype.get = function(){\n  var vect = this.vectors[this.index ++];\n  if (this.index == this.vectors.length){\n    this.index = 0;\n  }\n  return vect;\n}\n\nexport { VectorPool };\n","import { VectorPool } from \"./VectorPool\";\nimport { Vector3D } from \"./Vector3D\";\n\nvar vectorPool = new VectorPool(10);\n\nvar MathUtils = function(){\n\n}\n\nMathUtils.prototype.clamp = function(val, min, max){\n  return Math.max(min, Math.min(max, val));\n}\n\nMathUtils.prototype.uuidv4 = function(){\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport { MathUtils };\n","import { Vector3D } from \"./Vector3D\";\nimport { VectorPool } from \"./VectorPool\";\n\nvar vectorPool = new VectorPool(10);\n\nvar Box = function(centerPosition, size){\n  this.min = new Vector3D();\n  this.max = new Vector3D();\n\n  this.setFromCenterAndSize(centerPosition, size);\n}\n\nBox.prototype.setFromCenterAndSize = function(center, size){\n  var half = vectorPool.get().copy(size).multiplyScalar(0.5);\n  this.min.set(center.x - half.x, center.y - half.y, center.z - half.z);\n  this.max.set(center.x + half.x, center.y + half.y, center.z + half.z);\n  return this;\n}\n\nBox.prototype.makeEmpty = function(){\n  this.min.set(Infinity, Infinity, Infinity);\n  this.max.set(-Infinity, -Infinity, -Infinity);\n  return this;\n}\n\nBox.prototype.expandByPoint = function(point){\n  this.min.min(point);\n  this.max.max(point);\n\n  return this;\n}\n\nBox.prototype.intersectsBox = function(box){\n  return !(box.max.x < this.min.x || box.min.x > this.max.x ||\n            box.max.y < this.min.y || box.min.y > this.max.y ||\n              box.max.z < this.min.z || box.min.z > this.max.z);\n}\n\nBox.prototype.containsBox = function(box){\n  return (this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\t     this.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\t        this.min.z <= box.min.z && box.max.z <= this.max.z);\n}\n\nBox.prototype.setFromTwoVectors = function(vec1, vec2, thickness){\n  this.makeEmpty();\n  this.expandByPoint(vec1);\n  this.expandByPoint(vec2);\n  var v = vectorPool.get().copy(vec1);\n  v.x = vec1.x + thickness;\n  this.expandByPoint(v);\n  v.x = vec1.x - thickness;\n  this.expandByPoint(v);\n  v.x = vec1.x;\n  v.y = vec1.y + thickness;\n  this.expandByPoint(v);\n  v.y = vec1.y - thickness;\n  this.expandByPoint(v);\n  v.y = vec1.y;\n  v.z = vec1.z + thickness;\n  this.expandByPoint(v);\n  v.z = vec1.z - thickness;\n  this.expandByPoint(v);\n\n  v.copy(vec2);\n  v.x = vec2.x + thickness;\n  this.expandByPoint(v);\n  v.x = vec2.x - thickness;\n  this.expandByPoint(v);\n  v.x = vec2.x;\n  v.y = vec2.y + thickness;\n  this.expandByPoint(v);\n  v.y = vec2.y - thickness;\n  this.expandByPoint(v);\n  v.y = vec2.y;\n  v.z = vec2.z + thickness;\n  this.expandByPoint(v);\n  v.z = vec2.z - thickness;\n  this.expandByPoint(v);\n\n  return this;\n}\n\nBox.prototype.isEmpty = function(){\n  return (this.max.x < this.min.x) || (this.max.y < this.min.y) || (this.max.z < this.min.z);\n}\n\nBox.prototype.getBoundingRadius = function(){\n  var v = vectorPool.get().set(0, 0, 0);\n\n  if (!this.isEmpty()){\n    v.copy(this.max).sub(this.min);\n  }\n\n  return v.getLength() * 0.5;\n}\n\nexport { Box };\n","var Nearby = function Nearby(width, height, depth, binSize) {\n  this.limitBox = this.createBox(0, 0, 0, width, height, depth);\n  this.binSize = binSize;\n\n  this.bin = new Map();\n\n  this.reusableResultMap = new Map();\n};\n\nNearby.prototype.createBox = function (x, y, z, width, height, depth) {\n  var bb = {};\n\n  bb.containsBox = function (box) {\n    return this.minX <= box.minX && box.maxX <= this.maxX && this.minY <= box.minY && box.maxY <= this.maxY && this.minZ <= box.minZ && box.maxZ <= this.maxZ;\n  };\n\n  bb.setFromCenterAndSize = function (x, y, z, width, height, depth) {\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfDepth = depth / 2;\n\n    this.minX = x - halfWidth;\n    this.maxX = x + halfWidth;\n    this.minY = y - halfHeight;\n    this.maxY = y + halfHeight;\n    this.minZ = z - halfDepth;\n    this.maxZ = z + halfDepth;\n  };\n\n  bb.setFromCenterAndSize(x, y, z, width, height, depth);\n\n  return bb;\n};\n\nNearby.prototype.createObject = function (id, box) {\n  var self = this;\n\n  var obj = {\n    id: id,\n    box: box,\n    binInfo: new Map()\n  };\n\n  return obj;\n};\n\nNearby.prototype.insert = function (obj) {\n  if (!this.limitBox.containsBox(obj.box)) {\n    return;\n  }\n\n  var BIN_SIZE = this.binSize;\n\n  var box = obj.box;\n  var minX = box.minX;\n  var minY = box.minY;\n  var minZ = box.minZ;\n  var maxX = box.maxX;\n  var maxY = box.maxY;\n  var maxZ = box.maxZ;\n\n  var round = Math.round(minX / BIN_SIZE) * BIN_SIZE;\n  var minXLower, minXUpper;\n  if (round <= minX) {\n    minXLower = round;\n    minXUpper = minXLower + BIN_SIZE;\n  } else {\n    minXUpper = round;\n    minXLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxX / BIN_SIZE) * BIN_SIZE;\n  var maxXLower, maxXUpper;\n  if (round < maxX) {\n    maxXLower = round;\n    maxXUpper = maxXLower + BIN_SIZE;\n  } else {\n    maxXUpper = round;\n    maxXLower = round - BIN_SIZE;\n  }\n  if (minXLower > maxXLower) {\n    maxXLower = minXLower;\n  }\n\n  round = Math.round(minY / BIN_SIZE) * BIN_SIZE;\n  var minYLower, minYUpper;\n  if (round <= minY) {\n    minYLower = round;\n    minYUpper = minYLower + BIN_SIZE;\n  } else {\n    minYUpper = round;\n    minYLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxY / BIN_SIZE) * BIN_SIZE;\n  var maxYLower, maxYUpper;\n  if (round < maxY) {\n    maxYLower = round;\n    maxYUpper = maxYLower + BIN_SIZE;\n  } else {\n    maxYUpper = round;\n    maxYLower = round - BIN_SIZE;\n  }\n  if (minYLower > maxYLower) {\n    maxYLower = minYLower;\n  }\n\n  round = Math.round(minZ / BIN_SIZE) * BIN_SIZE;\n  var minZLower, minZUpper;\n  if (round <= minZ) {\n    minZLower = round;\n    minZUpper = minZLower + BIN_SIZE;\n  } else {\n    minZUpper = round;\n    minZLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxZ / BIN_SIZE) * BIN_SIZE;\n  var maxZLower, maxZUpper;\n  if (round < maxZ) {\n    maxZLower = round;\n    maxZUpper = maxZLower + BIN_SIZE;\n  } else {\n    maxZUpper = round;\n    maxZLower = round - BIN_SIZE;\n  }\n  if (minZLower > maxZLower) {\n    maxZLower = minZLower;\n  }\n\n  for (var x = minXLower; x <= maxXLower; x += BIN_SIZE) {\n    for (var y = minYLower; y <= maxYLower; y += BIN_SIZE) {\n      for (var z = minZLower; z <= maxZLower; z += BIN_SIZE) {\n        if (!this.bin.has(x)) {\n          this.bin.set(x, new Map());\n        }\n        if (!this.bin.get(x).has(y)) {\n          this.bin.get(x).set(y, new Map());\n        }\n        if (!this.bin.get(x).get(y).has(z)) {\n          this.bin.get(x).get(y).set(z, new Map());\n        }\n        this.bin.get(x).get(y).get(z).set(obj, true);\n\n        if (!obj.binInfo.has(x)) {\n          obj.binInfo.set(x, new Map());\n        }\n        if (!obj.binInfo.get(x).has(y)) {\n          obj.binInfo.get(x).set(y, new Map());\n        }\n        obj.binInfo.get(x).get(y).set(z, true);\n      }\n    }\n  }\n};\n\nNearby.prototype.query = function (x, y, z) {\n  var BIN_SIZE = this.binSize;\n\n  var rX = Math.round(x / BIN_SIZE) * BIN_SIZE;\n  var rY = Math.round(y / BIN_SIZE) * BIN_SIZE;\n  var rZ = Math.round(z / BIN_SIZE) * BIN_SIZE;\n\n  var minX, maxX;\n  if (rX <= x) {\n    minX = rX;\n    maxX = rX + BIN_SIZE;\n  } else {\n    maxX = rX;\n    minX = rX - BIN_SIZE;\n  }\n  var minY, maxY;\n  if (rY <= y) {\n    minY = rY;\n    maxY = rY + BIN_SIZE;\n  } else {\n    maxY = rY;\n    minY = rY - BIN_SIZE;\n  }\n  var minZ, maxZ;\n  if (rZ <= z) {\n    minZ = rZ;\n    maxZ = rZ + BIN_SIZE;\n  } else {\n    maxZ = rZ;\n    minZ = rZ - BIN_SIZE;\n  }\n\n  var result = this.reusableResultMap;\n  result.clear();\n\n  for (var xDiff = -BIN_SIZE; xDiff <= BIN_SIZE; xDiff += BIN_SIZE) {\n    for (var yDiff = -BIN_SIZE; yDiff <= BIN_SIZE; yDiff += BIN_SIZE) {\n      for (var zDiff = -BIN_SIZE; zDiff <= BIN_SIZE; zDiff += BIN_SIZE) {\n        var keyX = minX + xDiff;\n        var keyY = minY + yDiff;\n        var keyZ = minZ + zDiff;\n        if (this.bin.has(keyX) && this.bin.get(keyX).has(keyY)) {\n          var res = this.bin.get(keyX).get(keyY).get(keyZ);\n          if (res) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = res.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var obj = _step.value;\n\n                result.set(obj, true);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nNearby.prototype.delete = function (obj) {\n  var binInfo = obj.binInfo;\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = binInfo.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var x = _step2.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = binInfo.get(x).keys()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var y = _step4.value;\n          var _iteratorNormalCompletion5 = true;\n          var _didIteratorError5 = false;\n          var _iteratorError5 = undefined;\n\n          try {\n            for (var _iterator5 = binInfo.get(x).get(y).keys()[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n              var z = _step5.value;\n\n              if (this.bin.has(x) && this.bin.get(x).has(y) && this.bin.get(x).get(y).has(z)) {\n                this.bin.get(x).get(y).get(z).delete(obj);\n                if (this.bin.get(x).get(y).get(z).size == 0) {\n                  this.bin.get(x).get(y).delete(z);\n                }\n                if (this.bin.get(x).get(y).size == 0) {\n                  this.bin.get(x).delete(y);\n                }\n                if (this.bin.get(x).size == 0) {\n                  this.bin.delete(x);\n                }\n              }\n            }\n          } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                _iterator5.return();\n              }\n            } finally {\n              if (_didIteratorError5) {\n                throw _iteratorError5;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = binInfo.keys()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var x = _step3.value;\n\n      binInfo.delete(x);\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n};\n\nNearby.prototype.update = function (obj, x, y, z, width, height, depth) {\n  obj.box.setFromCenterAndSize(x, y, z, width, height, depth);\n\n  this.delete(obj);\n  this.insert(obj);\n};\n\nexport default Nearby;\n","import { MathUtils } from \"./MathUtils\";\nimport { VectorPool } from \"./VectorPool\";\n\nvar vectorPool = new VectorPool(10);\nvar mathUtils = new MathUtils();\n\nvar Quaternion = function(x, y, z, w){\n  this.set(x || 0, y || 0, z || 0, w === undefined ? 1 : w);\n}\n\nQuaternion.prototype.set = function(x, y, z, w){\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  this.w = w;\n\n  return this;\n}\n\nQuaternion.prototype.copy = function(quaternion){\n  this.set(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n\n  return this;\n}\n\nQuaternion.prototype.clone = function(){\n  return new Quaternion().copy(this);\n}\n\nQuaternion.prototype.dot = function(quaternion){\n  return (this.x * quaternion.x) + (this.y * quaternion.y) + (this.z * quaternion.z) + (this.w * quaternion.w);\n}\n\nQuaternion.prototype.radialDistanceTo = function(quaternion){\n  return 2 * Math.acos(Math.abs(mathUtils.clamp(this.dot(quaternion), - 1, 1)));\n}\n\nQuaternion.prototype.getLength = function(){\n  return Math.sqrt((this.x * this.x) + (this.y * this.y) + (this.z * this.z) + (this.w * this.w));\n}\n\nQuaternion.prototype.normalize = function(){\n  var len = this.getLength();\n\n  if (len != 0){\n    return this.set(this.x / len, this.y / len, this.z / len, this.w / len);\n  }\n\n  return this.set(0, 0, 0, 1);\n}\n\nQuaternion.prototype.sphericalLinearInterpolation = function(quaternion, t){\n  if (t == 0){\n    return this;\n  }\n  if (t == 1){\n    return this.copy(quaternion);\n  }\n\n  var x = this.x, y = this.y, z = this.z, w = this.w;\n\n  var cosHalfTheta = w * quaternion.w + x * quaternion.x + y * quaternion.y + z * quaternion.z;\n\n  if (cosHalfTheta < 0){\n    this.set(-quaternion.x, -quaternion.y, -quaternion.z, -quaternion.w);\n    cosHalfTheta = -cosHalfTheta;\n  }else{\n    this.copy(quaternion);\n  }\n\n  if (cosHalfTheta >= 1){\n    return this.set(x, y, z, w);\n  }\n\n  var sqrSinHalfTheta = 1 - cosHalfTheta * cosHalfTheta;\n\n  if (sqrSinHalfTheta < Number.EPSILON){\n    var s = 1 - t;\n    return this.set(s * x + t * this.x, s * y + t * this.y, s * z + t * this.z, s * w + t * this.w).normalize();\n  }\n\n  var sinHalfTheta = Math.sqrt(sqrSinHalfTheta);\n  var halfTheta = Math.atan2(sinHalfTheta, cosHalfTheta);\n  var ratioA = Math.sin(( 1 - t) * halfTheta) / sinHalfTheta;\n  var ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n\n  return this.set(x * ratioA + this.x * ratioB, y * ratioA + this.y * ratioB, z * ratioA + this.z * ratioB, w * ratioA + this.w * ratioB);\n}\n\nQuaternion.prototype.rotateTowards = function(quaternion, step){\n  var radialDistance = this.radialDistanceTo(quaternion);\n  if (radialDistance == 0){\n    return this;\n  }\n\n  return this.sphericalLinearInterpolation(quaternion,  Math.min(1, step / radialDistance));\n}\n\nQuaternion.prototype.setFromVectors = function(vFrom, vTo){\n  var vFromNormalized = vectorPool.get().copy(vFrom).normalize();\n  var vToNormalized = vectorPool.get().copy(vTo).normalize();\n\n  var r = vFromNormalized.dot(vToNormalized) + 1;\n\n  if (r < Number.EPSILON){\n    if (Math.abs(vFromNormalized.x) > Math.abs(vToNormalized.z)){\n      this.set(-vFromNormalized.y, vFromNormalized.x, 0, 0);\n    }else{\n      this.set(0, -vFromNormalized.z, vFromNormalized.y, 0);\n    }\n  }else{\n    this.set(vFromNormalized.y * vToNormalized.z - vFromNormalized.z * vToNormalized.y, vFromNormalized.z * vToNormalized.x - vFromNormalized.x * vToNormalized.z, vFromNormalized.x * vToNormalized.y - vFromNormalized.y * vToNormalized.x, r);\n  }\n\n  return this.normalize();\n}\n\nexport { Quaternion };\n","import { Box } from \"./Box\";\nimport { Vector3D } from \"./Vector3D\";\nimport { VectorPool } from \"./VectorPool\";\nimport { Quaternion } from \"./Quaternion\";\n\nvar quaternion = new Quaternion();\nvar quaternion2 = new Quaternion();\nvar delta = 1/60;\nvar vectorPool = new VectorPool(10);\n\nvar Entity = function(id, center, size){\n  this.id = id;\n  this.size = size.clone();\n  this.position = center.clone();\n\n  this.world = null;\n\n  this.box = new Box(center, size);\n\n  this.nearbyObject = null;\n\n  this.maxSpeed = Infinity;\n  this.velocity = new Vector3D();\n\n  this.hasLookTarget = false;\n  this.lookTarget = new Vector3D();\n\n  this.lookSpeed = 0.1;\n\n  this.lookDirection = new Vector3D(0, 0, -1);\n\n  this.isHidden = false;\n\n  this.limitVelocity = true;\n}\n\nEntity.prototype.update = function(){\n\n  if (this.isHidden){\n    return;\n  }\n\n  var speed = this.velocity.getLength();\n  if (this.limitVelocity && speed > this.maxSpeed){\n    this.velocity.copy(this.velocity.normalize().multiplyScalar(this.maxSpeed));\n  }\n\n  var vect = vectorPool.get().copy(this.velocity).multiplyScalar(delta);\n  this.setPosition(this.position.add(vect));\n\n  if (this.hasLookTarget){\n    var desiredDirection = vectorPool.get().copy(this.lookTarget).sub(this.position);\n    var desiredQuaternion = quaternion.setFromVectors(this.lookDirection, desiredDirection);\n    quaternion2.set(0, 0, 0, 1);\n    var v = vectorPool.get().copy(this.lookDirection).applyQuaternion(quaternion2.rotateTowards(quaternion, this.lookSpeed));\n    this.setLookDirection(v);\n  }\n}\n\nEntity.prototype.setLimitVelocity = function(val){\n  this.limitVelocity = val;\n}\n\nEntity.prototype.setPositionAndSize = function(position, size){\n\n  if (this.isHidden){\n    return false;;\n  }\n\n  this.setPosition(position, true);\n  this.setSize(size);\n\n  return true;\n}\n\nEntity.prototype.setSize = function(size, skipWorldUpdate){\n\n  if (this.isHidden){\n    return false;\n  }\n\n  this.size.copy(size);\n  this.box.setFromCenterAndSize(this.position, size);\n\n  if (this.world && !skipWorldUpdate){\n    this.world.updateEntity(this, this.position, this.size);\n  }\n\n  return true;\n}\n\nEntity.prototype.setPosition = function(position, skipWorldUpdate){\n\n  if (this.isHidden){\n    return false;\n  }\n\n  this.position.copy(position);\n  this.box.setFromCenterAndSize(position, this.size);\n\n  if (this.world && !skipWorldUpdate){\n    this.world.updateEntity(this, this.position, this.size);\n  }\n\n  return true;\n}\n\nEntity.prototype.setLookDirection = function(direction){\n  this.lookDirection.copy(vectorPool.get().copy(direction).normalize());\n\n  if (this.world){\n    this.world.onLookDirectionUpdated(this);\n  }\n}\n\nEntity.prototype.executeForEachCloseEntity = function(func){\n  if (!this.world){\n    return;\n  }\n  var res = this.world.getNearbyObjects(this.position);\n  for (var obj of res){\n    if (obj.id != this.id){\n      if (func(this.world.getEntityByID(obj.id))){\n        return;\n      }\n    }\n  }\n}\n\nEntity.prototype.setLookTarget = function(target){\n  this.lookTarget.copy(target);\n  this.hasLookTarget = true;\n}\n\nEntity.prototype.unsetLookTarget = function(){\n  this.hasLookTarget = false;\n}\n\nEntity.prototype.isNearTo = function(entity){\n  var result = false;\n\n  this.executeForEachCloseEntity(function(candidate){\n    if (candidate === entity){\n      result = true;\n      return true;\n    }\n  });\n\n  return result;\n}\n\nexport { Entity };\n","import { Entity } from \"./Entity\";\nimport { Vector3D } from \"./Vector3D\";\n\nvar VERTEX_ENTITY_SIZE = new Vector3D(1, 1, 1);\n\nvar Vertex = function(positionVector, graph){\n\n  var position = positionVector.clone();\n\n  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n\n  Entity.call(this, 'vertex#' + uuid, position, VERTEX_ENTITY_SIZE);\n\n  this.position = position;\n  this.graph = graph;\n}\n\nVertex.prototype = Object.create(Entity.prototype);\n\nObject.defineProperty(Vertex.prototype, 'constructor', { value: Vertex,  enumerable: false, writable: true });\nexport { Vertex };\n","import Nearby from \"../third-party/Nearby\";\nimport { Vector3D } from \"./Vector3D\";\nimport { Vertex } from \"./Vertex\";\n\nvar World = function(width, height, depth, binSize){\n\n  this.width = width;\n  this.height = height;\n  this.depth = depth;\n\n  this.nearby = new Nearby(width, height, depth, binSize);\n\n  this.entititesByID = {};\n\n  this.gravity = 0\n}\n\nWorld.prototype.setGravity = function(gravity){\n  this.gravity = gravity;\n}\n\nWorld.prototype.getEntityByID = function(entityID){\n  return this.entititesByID[entityID] || null;\n}\n\nWorld.prototype.insertGraph = function(graph){\n  if (graph.world){\n    return;\n  }\n\n  var self = this;\n\n  graph.forEachVertex(function(x, y, z){\n    var vertex = new Vertex(new Vector3D(x, y, z), graph);\n    self.insertEntity(vertex);\n    graph.vertexIDs.push(vertex.id);\n  });\n\n  graph.world = this;\n}\n\nWorld.prototype.removeGraph = function(graph){\n  if (!graph.world){\n    return;\n  }\n\n  for (var i = 0; i < graph.vertexIDs.length; i ++){\n    var vertexID = graph.vertexIDs[i];\n    var entity = this.getEntityByID(vertexID);\n    this.removeEntity(entity);\n  }\n\n  graph.world = null;\n  graph.vertexIDs = [];\n}\n\nWorld.prototype.hideEntity = function(entity){\n\n  if (!this.entititesByID[entity.id] || entity.isHidden){\n    return false;\n  }\n\n  this.nearby.delete(entity.nearbyObject);\n  entity.isHidden = true;\n\n  if (this.onEntityHidden){\n    this.onEntityHidden(entity);\n  }\n\n  return true;\n}\n\nWorld.prototype.showEntity = function(entity){\n\n  if (!this.entititesByID[entity.id] || !entity.isHidden){\n    return false;\n  }\n\n  this.nearby.insert(entity.nearbyObject);\n  entity.isHidden = false;\n\n  if (this.onEntityShown){\n    this.onEntityShown(entity);\n  }\n\n  return true;\n}\n\nWorld.prototype.insertEntity = function(entity){\n\n  this.entititesByID[entity.id] = entity;\n\n  var center = entity.position;\n  var size = entity.size;\n\n  var nearbyBox = this.nearby.createBox(center.x, center.y, center.z, size.x, size.y, size.z);\n  var nearbyObj = this.nearby.createObject(entity.id, nearbyBox);\n  this.nearby.insert(nearbyObj);\n\n  entity.world = this;\n  entity.nearbyObject = nearbyObj;\n\n  entity.lastWorldPosition = center.clone();\n  entity.lastWorldSize = size.clone();\n\n  if (this.onEntityInserted){\n    this.onEntityInserted(entity);\n  }\n}\n\nWorld.prototype.updateEntity = function(entity, position, size){\n\n  if (entity.isHidden){\n    return;\n  }\n\n  if (entity.lastWorldPosition.eql(position) && entity.lastWorldSize.eql(size)){\n    return;\n  }\n\n  this.nearby.update(entity.nearbyObject, position.x, position.y, position.z, size.x, size.y, size.z);\n\n  if (this.onEntityUpdated){\n    this.onEntityUpdated(entity);\n  }\n\n  entity.lastWorldPosition.copy(position);\n  entity.lastWorldSize.copy(size);\n}\n\nWorld.prototype.onLookDirectionUpdated = function(entity){\n  if (this.onEntityLookDirectionUpdated){\n    this.onEntityLookDirectionUpdated(entity);\n  }\n}\n\nWorld.prototype.removeEntity = function(entity){\n  delete this.entititesByID[entity.id];\n  this.nearby.delete(entity.nearbyObject);\n\n  if (this.onEntityRemoved){\n    this.onEntityRemoved(entity);\n  }\n\n  delete entity.lastWorldPosition;\n  delete entity.lastWorldSize;\n}\n\nWorld.prototype.getNearbyObjects = function(position){\n  return this.nearby.query(position.x, position.y, position.z).keys();\n}\n\nWorld.prototype.forEachEntity = function(func){\n  for (var key in this.entititesByID){\n    var entity = this.entititesByID[key];\n    func(entity);\n  }\n}\n\nexport { World };\n","import { Vector3D } from \"./Vector3D\";\nimport { MathUtils } from \"./MathUtils\";\n\nvar mathUtils = new MathUtils();\n\nvar Path = function(options){\n\n  options = options || {};\n\n  this.index = 0;\n\n  this.length = 0;\n  this.jumpDescriptorLength = 0;\n\n  this.loop = !!options.loop;\n  this.rewind = !!options.rewind;\n\n  this.isRewinding = false;\n  this.isFinished = false;\n\n  this.waypoints = [];\n  this.jumpDescriptors = [];\n\n  this.finishCallbacksByID = {};\n\n  if (options.fixedLength){\n    for (var i = 0; i < options.fixedLength; i ++){\n      this.waypoints.push(new Vector3D());\n      this.jumpDescriptors.push(null);\n    }\n  }\n\n  this.options = JSON.parse(JSON.stringify(options));\n}\n\nPath.prototype.clone = function(){\n  var cloned = new Path(this.options);\n\n  if (!this.options.fixedLength){\n    for (var i = 0; i < this.waypoints.length ; i ++){\n      cloned.addWaypoint(this.waypoints[i]);\n    }\n\n    for (var i = 0; i < this.jumpDescriptors.length; i ++){\n      cloned.addJumpDescriptor(this.jumpDescriptors[i]);\n    }\n  }else{\n    for (var i = 0; i < this.length; i ++){\n      cloned.insertWaypoint(this.waypoints[i]);\n    }\n\n    for (var i = 0; i < this.jumpDescriptorLength; i ++){\n      cloned.insertJumpDescriptor(this.jumpDescriptors[i]);\n    }\n  }\n\n  return cloned;\n}\n\nPath.prototype.restart = function(){\n  this.isRewinding = false;\n  this.isFinished = false;\n  this.index = 0;\n}\n\nPath.prototype.insertJumpDescriptor = function(jumpDescriptor){\n  this.jumpDescriptors[this.jumpDescriptorLength ++] = jumpDescriptor;\n}\n\nPath.prototype.addJumpDescriptor = function(jumpDescriptor){\n  var takeoffPosition = jumpDescriptor.takeoffPosition;\n  var landingPosition = jumpDescriptor.landingPosition;\n\n  var takeoffIndex = this.getWaypointIndex(takeoffPosition);\n\n  if (takeoffIndex == null){\n    return false;\n  }\n\n  var landingIndex = this.getWaypointIndex(landingPosition);\n  if (landingIndex == null){\n    return false;\n  }\n\n  if (takeoffIndex >= landingIndex){\n    return false;\n  }\n\n  this.jumpDescriptors.push(jumpDescriptor);\n\n  this.jumpDescriptorLength ++;\n\n  return true;\n}\n\nPath.prototype.getWaypointIndex = function(waypoint){\n  var length = this.length;\n  var index = this.waypoints.findIndex(function(wp, index){\n    return (index < length) && wp.eql(waypoint);\n  });\n\n  if (index == -1){\n    return null;\n  }\n\n  return index;\n}\n\nPath.prototype.insertWaypoint = function(waypoint){\n  this.waypoints[this.length ++].copy(waypoint);\n}\n\nPath.prototype.addWaypoint = function(waypoint){\n  this.waypoints.push(waypoint.clone());\n  this.length ++;\n}\n\nPath.prototype.getCurrentWaypoint = function(){\n  return this.isFinished ? false : (this.waypoints[this.index] || false);\n}\n\nPath.prototype.addFinishCallback = function(fn){\n  var id = mathUtils.uuidv4();\n\n  this.finishCallbacksByID[id] = fn;\n\n  return id;\n}\n\nPath.prototype.removeFinishCallback = function(callbackID){\n  if (this.finishCallbacksByID[callbackID]){\n    delete this.finishCallbacksByID[callbackID];\n    return true;\n  }\n\n  return false;\n}\n\nPath.prototype.onFinished = function(){\n  var allCallbacks = this.finishCallbacksByID;\n  for (var id in allCallbacks){\n    allCallbacks[id]();\n  }\n}\n\nPath.prototype.next = function(){\n  if (this.isFinished){\n    return;\n  }\n\n  var len = this.length\n\n  if (!this.isRewinding){\n    this.index ++;\n\n    if (this.index == len){\n\n      if (this.rewind){\n        this.index = len - 2;\n        this.isRewinding = true;\n      }else if (this.loop){\n        this.index = 0;\n      }else{\n        this.isFinished = true;\n        this.onFinished();\n      }\n    }\n  }else{\n\n    this.index --;\n\n    if (this.index == -1){\n      if (this.loop){\n        this.index = 1;\n        this.isRewinding = false;\n      }else{\n        this.isFinished = true;\n        this.onFinished();\n      }\n    }\n  }\n}\n\nPath.prototype.getRandomWaypoint = function(){\n  return this.waypoints[Math.floor(Math.random() * this.length)] || null;\n}\n\nexport { Path };\n","var Edge = function(fromVertex, toVertex){\n  this.fromVertex = fromVertex.clone();\n  this.toVertex = toVertex.clone();\n  this.cost = fromVertex.clone().sub(toVertex).getLength();\n\n  this.jumpDescriptor = null;\n}\n\nEdge.prototype.clone = function(){\n  return new Edge(this.fromVertex, this.toVertex);\n}\n\nexport { Edge };\n","import { Edge } from \"./Edge\";\nimport { Vertex } from \"./Vertex\";\nimport { Vector3D } from \"./Vector3D\";\n\nvar Graph = function(){\n\n  this.world = null\n\n  this.connections = {};\n\n  this.totalVertexCount = 0;\n\n  this.vertexIDs = [];\n}\n\nGraph.prototype.clone = function(){\n  var cloned = new Graph();\n\n  this.forEachVertex(function(x, y, z){\n    cloned.addVertex(new Vector3D(x, y, z));\n  });\n\n  this.forEachEdge(function(edge){\n    cloned.addEdge(edge.fromVertex, edge.toVertex);\n  });\n\n  this.forEachEdge(function(edge){\n    if (edge.jumpDescriptor){\n      cloned.addJumpDescriptor(edge.jumpDescriptor);\n    }\n  });\n\n  return cloned;\n}\n\nGraph.prototype.findClosestVertexToPoint = function(pointVector){\n\n  var world = this.world;\n\n  if (!world){\n    return null;\n  }\n\n  var dist = Infinity, closest = null;\n\n  var res = this.world.getNearbyObjects(pointVector);\n  for (var obj of res){\n    var entity = world.getEntityByID(obj.id);\n\n    if ((entity instanceof Vertex) && entity.graph === this){\n\n      var curDist = pointVector.getDistanceSq(entity.position);\n      if (curDist < dist){\n        closest = entity;\n        dist = curDist;\n      }\n    }\n  }\n\n  if (closest){\n    return closest.position;\n  }\n\n  return null;\n}\n\nGraph.prototype.addVertex = function(vertex){\n\n  if (this.hasVertex(vertex)){\n    return false;\n  }\n\n  var x = vertex.x;\n  var y = vertex.y;\n  var z = vertex.z;\n\n  if (!this.connections[x]){\n    this.connections[x] = {};\n  }\n\n  if (!this.connections[x][y]){\n    this.connections[x][y] = {};\n  }\n\n  if (!this.connections[x][y][z]){\n    this.connections[x][y][z] = [];\n  }\n\n  this.totalVertexCount ++;\n\n\n\n  return true;\n}\n\nGraph.prototype.removeVertex = function(vertex){\n\n  if (!this.hasVertex(vertex)){\n    return false;\n  }\n\n  var x = vertex.x;\n  var y = vertex.y;\n  var z = vertex.z;\n\n  delete this.connections[x][y][z];\n\n  if (Object.keys(this.connections[x][y]).length == 0){\n    delete this.connections[x][y];\n  }\n\n  if (Object.keys(this.connections[x]).length == 0){\n    delete this.connections[x];\n  }\n\n  for (var x in this.connections){\n    for (var y in this.connections[x]){\n      for (var z in this.connections[x][y]){\n        var ary = this.connections[x][y][z];\n        var index = -1;\n        for (var i = 0; i < ary.length; i ++){\n          var edge = ary[i];\n          var to = edge.toVertex;\n          if (to.x == vertex.x && to.y == vertex.y && to.z == vertex.z){\n            index = i;\n            break;\n          }\n        }\n        if (index != -1){\n          ary.splice(index, 1);\n          this.connections[x][y][z] = ary;\n        }\n      }\n    }\n  }\n\n  this.totalVertexCount --;\n\n  return true;\n}\n\nGraph.prototype.hasVertex = function(vertex){\n  var x = vertex.x;\n  var y = vertex.y;\n  var z = vertex.z;\n\n  return !!(this.connections[x] && this.connections[x][y] && this.connections[x][y][z]);\n}\n\nGraph.prototype.addEdge = function(fromVertex, toVertex){\n  if (!this.hasVertex(fromVertex) || !this.hasVertex(toVertex)){\n    return false;\n  }\n\n  var edges = this.connections[fromVertex.x][fromVertex.y][fromVertex.z];\n\n  for (var i = 0; i < edges.length; i ++){\n    var to = edges[i].toVertex;\n    if (to.x == toVertex.x && to.y == toVertex.y && to.z == toVertex.z){\n      return false;\n    }\n  }\n\n  var edge = new Edge(fromVertex, toVertex);\n  edges.push(edge);\n\n  return true;\n}\n\nGraph.prototype.addJumpDescriptor = function(jumpDescriptor){\n  var fromVertex = jumpDescriptor.takeoffPosition;\n  var toVertex = jumpDescriptor.landingPosition;\n  if (!this.hasVertex(fromVertex) || !this.hasVertex(toVertex)){\n    return false;\n  }\n\n  var edges = this.connections[fromVertex.x][fromVertex.y][fromVertex.z];\n  var edge = null;\n\n  for (var i = 0; i < edges.length; i ++){\n    var to = edges[i].toVertex;\n    if (to.x == toVertex.x && to.y == toVertex.y && to.z == toVertex.z){\n      edge = edges[i];\n      break;\n    }\n  }\n\n  if (edge){\n    edge.jumpDescriptor = jumpDescriptor;\n  }else{\n    edge = new Edge(fromVertex, toVertex);\n    edge.jumpDescriptor = jumpDescriptor;\n    edges.push(edge);\n  }\n\n  return true;\n}\n\nGraph.prototype.removeEdge = function(fromVertex, toVertex){\n  if (!this.hasVertex(fromVertex) || !this.hasVertex(toVertex)){\n    return false;\n  }\n\n  var ary = this.connections[fromVertex.x][fromVertex.y][fromVertex.z];\n\n  var index = -1;\n  for (var i = 0; i < ary.length; i ++){\n    var edge = ary[i];\n    var to = edge.toVertex;\n    if (to.x == toVertex.x && to.y == toVertex.y && to.z == toVertex.z){\n      index = i;\n      break;\n    }\n  }\n\n  if (index == -1){\n    return false;\n  }\n\n  ary.splice(index, 1);\n  this.connections[fromVertex.x][fromVertex.y][fromVertex.z] = ary;\n\n  return true;\n}\n\nGraph.prototype.forEachNeighbor = function(vertex, fn){\n  if (!this.hasVertex(vertex)){\n    return;\n  }\n\n  var ary = this.connections[vertex.x][vertex.y][vertex.z];\n\n  for (var i = 0; i < ary.length; i ++){\n    var edge = ary[i];\n    fn(edge.toVertex, edge.cost, edge.jumpDescriptor);\n  }\n}\n\nGraph.prototype.forEachVertex = function(fn){\n  for (var x in this.connections){\n    for (var y in this.connections[x]){\n      for (var z in this.connections[x][y]){\n        fn(parseFloat(x), parseFloat(y), parseFloat(z));\n      }\n    }\n  }\n}\n\nGraph.prototype.forEachEdge = function(fn){\n  for (var x in this.connections){\n    for (var y in this.connections[x]){\n      for (var z in this.connections[x][y]){\n        var edges = this.connections[x][y][z];\n        for (var i = 0; i < edges.length; i ++){\n          fn(edges[i]);\n        }\n      }\n    }\n  }\n}\n\nexport { Graph };\n","var MinHeap = function(maxNodeCount){\n  this.data = [];\n  for (var i = 0; i < maxNodeCount; i ++){\n    this.data.push(null);\n  }\n\n  this.length = 0;\n\n  this.HEAP_CHECK_RESULT_OK = 0;\n  this.HEAP_CHECK_RESULT_LEFT = 1;\n  this.HEAP_CHECK_RESULT_RIGHT = 2;\n}\n\nMinHeap.prototype.reset = function(){\n  for (var i = 0; i < this.data.length; i ++){\n    this.data[i] = null;\n  }\n\n  this.length = 0;\n}\n\nMinHeap.prototype.peek = function(){\n  return this.data[0];\n}\n\nMinHeap.prototype.getParentIndex = function(childIndex){\n  return Math.floor(childIndex / 2);\n}\n\nMinHeap.prototype.getLeftChildIndex = function(rootIndex){\n  return this.getRightChildIndex(rootIndex) - 1;\n}\n\nMinHeap.prototype.getRightChildIndex = function(rootIndex){\n  return 2 * (rootIndex + 1);\n}\n\nMinHeap.prototype.insert = function(heapNode){\n\n  if (this.data.length == this.length){\n    return false;\n  }\n\n  var curNodeIndex = this.length;\n  var curParentIndex = this.getParentIndex(this.length);\n\n  this.data[curNodeIndex] = heapNode;\n\n  var parent = this.data[curParentIndex];\n  while(parent && heapNode.priority < parent.priority){\n    this.data[curParentIndex] = heapNode;\n    this.data[curNodeIndex] = parent;\n\n    curNodeIndex = curParentIndex;\n    curParentIndex = this.getParentIndex(curNodeIndex);\n    parent = this.data[curParentIndex];\n  }\n\n  this.length ++;\n  return true;\n}\n\nMinHeap.prototype.remove = function(node){\n  var index = this.data.indexOf(node);\n\n  if (index == -1){\n    return false;\n  }\n\n  var lastIndex = this.length - 1;\n  this.swap(index, lastIndex);\n  this.data[lastIndex] = null;\n  this.length --;\n\n  this.reconstruct(index);\n\n  return true;\n}\n\nMinHeap.prototype.heapCheck = function(rootIndex){\n  var root = this.data[rootIndex];\n\n  if (!root){\n    return this.HEAP_CHECK_RESULT_OK;\n  }\n\n  var leftIndex = this.getLeftChildIndex(rootIndex);\n  var rightIndex = this.getRightChildIndex(rootIndex);\n\n  var left = this.data[leftIndex];\n  var right = this.data[rightIndex];\n  if (!left && !right){\n    return this.HEAP_CHECK_RESULT_OK;\n  }else if (!right){\n    if (root.priority <= left.priority){\n      return this.HEAP_CHECK_RESULT_OK;\n    }else{\n      return this.HEAP_CHECK_RESULT_LEFT;\n    }\n  }\n\n  if (root.priority <= left.priority && root.priority <= right.priority){\n    return this.HEAP_CHECK_RESULT_OK;\n  }\n\n  if (left.priority <= root.priority && left.priority <= right.priority){\n    return this.HEAP_CHECK_RESULT_LEFT;\n  }\n\n  return this.HEAP_CHECK_RESULT_RIGHT;\n}\n\nMinHeap.prototype.swap = function(index1, index2){\n  var val1 = this.data[index1];\n  var val2 = this.data[index2];\n\n  this.data[index1] = val2;\n  this.data[index2] = val1;\n}\n\nMinHeap.prototype.pop = function(){\n  if (this.length == 0){\n    return false;\n  }\n\n  var minData = this.data[0];\n\n  var lastIndex = this.length - 1;\n  this.data[0] = this.data[lastIndex];\n  this.data[lastIndex] = null;\n  this.length --;\n\n  this.reconstruct(0);\n\n  return minData;\n}\n\nMinHeap.prototype.reconstruct = function(rootIndex){\n  var heapCheckResult = this.heapCheck(rootIndex);\n  while (heapCheckResult != this.HEAP_CHECK_RESULT_OK){\n    if (heapCheckResult == this.HEAP_CHECK_RESULT_LEFT){\n      var leftIndex = this.getLeftChildIndex(rootIndex);\n      this.swap(rootIndex, leftIndex);\n      rootIndex = leftIndex;\n    }else{\n      var rightIndex = this.getRightChildIndex(rootIndex);\n      this.swap(rootIndex, rightIndex);\n      rootIndex = rightIndex;\n    }\n\n    heapCheckResult = this.heapCheck(rootIndex);\n  }\n}\n\nMinHeap.prototype.hasNode = function(node){\n  return this.data.indexOf(node) >= 0;\n}\n\nexport { MinHeap };\n","import { Vector3D } from \"./Vector3D\";\nimport { VectorPool } from \"./VectorPool\";\nimport { Path } from \"./Path\";\nimport { MinHeap } from \"./MinHeap\";\nimport { MathUtils } from \"./MathUtils\";\n\nvar ZERO_VECTOR = new Vector3D();\nvar vectorPool = new VectorPool(10);\n\nvar mathUtils = new MathUtils();\n\nvar AStar = function(graph){\n\n  var path = new Path({ fixedLength: graph.totalVertexCount });\n\n  var heapNodes = {};\n\n  graph.forEachVertex(function(x, y, z){\n    if (!heapNodes[x]){\n      heapNodes[x] = {};\n    }\n\n    if (!heapNodes[x][y]){\n      heapNodes[x][y] = {};\n    }\n\n    if (!heapNodes[x][y][z]){\n      heapNodes[x][y][z] = { priority: 0, parent: null, x: parseFloat(x), y: parseFloat(y), z: parseFloat(z), closedTag: null, parentTag: null, priorityTag: null, jumpDescriptor: null };\n    }\n  });\n\n  this.heapNodes = heapNodes;\n  this.path = path;\n  this.graph = graph;\n  this.heap = new MinHeap(graph.totalVertexCount);\n\n  this._internalID = mathUtils.uuidv4();\n\n  this.searchID = 0;\n}\n\nAStar.prototype.getHeapNode = function(x, y, z, heapNodes){\n  var nx = heapNodes ? heapNodes[x] : this.heapNodes[x];\n  if (nx){\n    var ny = nx[y];\n    if (ny){\n      return ny[z] || null;\n    }\n    return null;\n  }\n  return null;\n}\n\nAStar.prototype.isNodeBelongToVector = function(node, vector){\n  return node === this.getHeapNode(vector.x, vector.y, vector.z);\n}\n\nAStar.prototype.generatePath = function(endVector){\n\n  var path = this.path;\n  path.length = 0;\n\n  var vec = endVector;\n  var heapNode = this.getHeapNode(vec.x, vec.y, vec.z);\n\n  while (heapNode){\n    path.insertWaypoint(vec);\n\n    var jumpDescriptor = heapNode.jumpDescriptor;\n    if (jumpDescriptor){\n      path.insertJumpDescriptor(jumpDescriptor);\n    }\n\n    var parentTag = heapNode.parentTag;\n    heapNode = heapNode.parent;\n    if (heapNode && parentTag != this.searchID){\n      heapNode = null;\n    }\n\n    if (heapNode){\n      vec = vectorPool.get().set(heapNode.x, heapNode.y, heapNode.z);\n    }\n  }\n\n  path.isRewinding = true;\n  path.index = path.length - 1;\n  path.isFinished = false;\n\n  if (this.onPathConstructed){\n    this.onPathConstructed();\n  }\n\n  return path;\n}\n\nAStar.prototype.markNodeAsClosed = function(node, searchID){\n  node.closedTag = searchID;\n}\n\nAStar.prototype.isNodeClosed = function(node, searchID){\n  return node.closedTag === searchID;\n}\n\nAStar.prototype.findShortestPath = function(fromVector, toVector){\n\n  var heapNodes = this.heapNodes;\n\n  this.searchID ++;\n\n  var searchID = this.searchID;\n\n  var heap = this.heap;\n\n  heap.reset();\n\n  var graph = this.graph;\n  if (!graph.hasVertex(fromVector) || !graph.hasVertex(toVector)){\n    return false;\n  }\n\n  var getHeapNode = this.getHeapNode;\n  var isNodeClosed = this.isNodeClosed;\n  var markNodeAsClosed = this.markNodeAsClosed;\n\n  var heapNode = this.getHeapNode(fromVector.x, fromVector.y, fromVector.z);\n  var vec = vectorPool.get();\n\n  heap.insert(heapNode);\n\n  while (heapNode){\n    if (this.isNodeBelongToVector(heapNode, toVector)){\n      return this.generatePath(toVector);\n    }\n\n    markNodeAsClosed(heapNode, searchID);\n\n    vec.set(heapNode.x, heapNode.y, heapNode.z);\n    graph.forEachNeighbor(vec, function(neighborVec, cost, jumpDescriptor){\n\n      var neighborHeapNode = getHeapNode(neighborVec.x, neighborVec.y, neighborVec.z, heapNodes);\n\n      var heuristicCost = neighborVec.getDistanceSq(toVector);\n\n      if (!isNodeClosed(neighborHeapNode, searchID)){\n        neighborHeapNode.priority = cost + heuristicCost;\n        neighborHeapNode.priorityTag = searchID;\n        neighborHeapNode.parent = heapNode;\n        neighborHeapNode.parentTag = searchID;\n        neighborHeapNode.jumpDescriptor = jumpDescriptor;\n        markNodeAsClosed(neighborHeapNode, searchID);\n        heap.insert(neighborHeapNode);\n      }\n\n      if (heap.hasNode(neighborHeapNode)){\n        var currentPriority = heuristicCost + cost;\n\n        if (currentPriority < neighborHeapNode.priority && neighborHeapNode.priorityTag == searchID){\n          neighborHeapNode.priority = currentPriority;\n          neighborHeapNode.parent = heapNode;\n          neighborHeapNode.parentTag = searchID;\n          neighborHeapNode.jumpDescriptor = jumpDescriptor;\n          heap.remove(neighborHeapNode);\n          heap.insert(neighborHeapNode);\n        }\n      }\n    });\n\n    heapNode = heap.pop();\n  }\n\n  return false;\n}\n\nexport { AStar };\n","var Logger = function(){\n\n  this.logMethod = console.log;\n\n  this.isEnabled = false;\n\n  this.lastMessageMap = {};\n}\n\nLogger.prototype.enable = function(){\n  this.isEnabled = true;\n}\n\nLogger.prototype.disable = function(){\n  this.isEnabled = false;\n}\n\nLogger.prototype.log = function(component, msg , id){\n  if (!this.isEnabled || this.lastMessageMap[id] == msg){\n    return;\n  }\n\n  this.logMethod(\"[\" + component + \"]: \" + msg + \" (\" + id + \")\");\n\n  this.lastMessageMap[id] = msg;\n}\n\nexport var logger = new Logger();\n","import { Entity } from \"../core/Entity\";\nimport { Vector3D } from \"../core/Vector3D\";\nimport { VectorPool } from \"../core/VectorPool\";\nimport { logger } from \"../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"Steerable\";\nvar LOG_NOT_INSERTED_TO_WORLD = \"Not inserted to a world.\";\nvar LOG_HAS_NO_BEHAVIOR = \"Has no behavior.\";\nvar LOG_JUMP_COMPLETED = \"Jump completed.\";\nvar LOG_JUMP_READY = \"Jump ready.\";\nvar LOG_EQUATION_CANNOT_BE_SOLVED = \"Equation cannot be solved.\";\nvar LOG_JUMP_INITIATED = \"Jump initiated.\";\nvar LOG_NO_JUMP_BEHAVIOR_SET = \"No jump behavior set.\";\nvar LOG_IS_HIDDEN = \"Steerable is hidden.\";\n\nvar delta = 1/60;\nvar vectorPool = new VectorPool(10);\n\nvar Steerable = function(id, center, size){\n  Entity.call(this, id, center, size);\n\n  this.hasTargetPosition = false;\n  this.hasTargetEntity = false;\n  this.hasHideTargetEntity = false;\n\n  this.targetPosition = new Vector3D();\n  this.targetEntity = null;\n  this.hideTargetEntity = null;\n\n  this.linearAcceleration = new Vector3D();\n  this.maxAcceleration = Infinity;\n\n  this.isJumpInitiated = false;\n  this.isJumpReady = false;\n  this.isJumpTakenOff = false;\n\n  this.jumpSpeed = Infinity;\n  this.jumpTime = 0;\n}\n\nSteerable.prototype = Object.create(Entity.prototype);\n\nSteerable.prototype.update = function(){\n\n  if (this.isHidden){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_IS_HIDDEN, this.id);\n    return;\n  }\n\n  if (!this.world){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NOT_INSERTED_TO_WORLD, this.id);\n    return;\n  }\n\n  if (!this.behavior){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_HAS_NO_BEHAVIOR, this.id);\n    return;\n  }\n\n  var steerResult = this.behavior.compute(this);\n\n  this.linearAcceleration.copy(steerResult.linear);\n\n  var len = this.linearAcceleration.getLength();\n  if (len > this.maxAcceleration){\n    this.linearAcceleration.copy(this.linearAcceleration.normalize().multiplyScalar(this.maxAcceleration));\n  }\n\n  if (this.isJumpTakenOff){\n    this.linearAcceleration.y += this.world.gravity;\n    this.jumpTime += delta;\n    if (this.jumpTime >= this.jumpDescriptor.getEquationResult(this).time){\n      logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_COMPLETED, this.id);\n      this.onJumpCompleted();\n    }\n  }\n\n  var vect = vectorPool.get().copy(this.linearAcceleration).multiplyScalar(delta);\n  this.velocity.add(vect);\n  Entity.prototype.update.call(this);\n\n  if (this.isJumpInitiated && !this.isJumpTakenOff && !this.isJumpReady){\n    var distToTakeoffPosition = vectorPool.get().copy(this.position).sub(this.jumpDescriptor.takeoffPosition).getLength();\n    if (distToTakeoffPosition < this.jumpDescriptor.takeoffPositionSatisfactionRadius){\n      logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_READY, this.id);\n      this.onJumpReady();\n    }\n  }\n}\n\nSteerable.prototype.setJumpBehavior = function(behavior){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.jumpBehavior = behavior;\n}\n\nSteerable.prototype.setBehavior = function(behavior){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.behavior = behavior;\n}\n\nSteerable.prototype.unsetTargetPosition = function(){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.hasTargetPosition = false;\n}\n\nSteerable.prototype.setTargetPosition = function(position){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.targetPosition.copy(position);\n  this.hasTargetPosition = true;\n}\n\nSteerable.prototype.setTargetEntity = function(entity){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.targetEntity = entity;\n  this.hasTargetEntity = true;\n}\n\nSteerable.prototype.unsetTargetEntity = function(){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.hasTargetEntity = false;\n  this.targetEntity = null;\n}\n\nSteerable.prototype.setHideTargetEntity = function(entity){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.hideTargetEntity = entity;\n  this.hasHideTargetEntity = true;\n}\n\nSteerable.prototype.unsetHideTargetEntity = function(){\n  if (this.isJumpInitiated){\n    return;\n  }\n\n  this.hasHideTargetEntity = false;\n  this.hideTargetEntity = null;\n}\n\nSteerable.prototype.jump = function(toTakeoffBehavior, jumpDescriptor){\n\n  var result = jumpDescriptor.solveQuadraticEquation(this);\n  if (!result){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_EQUATION_CANNOT_BE_SOLVED, this.id);\n    return false;\n  }\n\n  this.isJumpInitiated = false;\n  this.isJumpReady = false;\n  this.isJumpTakenOff = false;\n\n  this.unsetTargetEntity();\n  this.unsetHideTargetEntity();\n\n  this.setTargetPosition(jumpDescriptor.takeoffPosition);\n  this.setBehavior(toTakeoffBehavior);\n\n  this.jumpDescriptor = jumpDescriptor;\n\n  this.isJumpInitiated = true;\n\n  this.jumpTime = 0;\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_INITIATED, this.id);\n\n  return true;\n}\n\nSteerable.prototype.cancelJump = function(){\n  if (!(this.isJumpInitiated || this.isJumpReady || this.isJumpTakenOff)){\n    return false;\n  }\n\n  this.onJumpCompleted(true);\n\n  return true;\n}\n\nSteerable.prototype.onJumpReady = function(){\n  this.isJumpReady = true;\n  this.isJumpInitiated = false;\n  this.setBehavior(this.jumpBehavior);\n  this.isJumpInitiated = true;\n\n  if (!this.jumpBehavior){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_JUMP_BEHAVIOR_SET, this.id);\n  }\n}\n\nSteerable.prototype.onJumpTakeOff = function(){\n  this.isJumpTakenOff = true;\n\n  var jumpDescriptor = this.jumpDescriptor;\n  var equationResult = jumpDescriptor.getEquationResult(this);\n\n  this.setLimitVelocity(false);\n\n  this.velocity.set(equationResult.vx, this.jumpSpeed, equationResult.vz);\n}\n\nSteerable.prototype.onJumpCompleted = function(isCancel){\n  this.jumpTime = 0;\n  this.isJumpInitiated = false;\n  this.isJumpReady = false;\n  this.isJumpTakenOff = false;\n\n  if (!isCancel){\n    this.position.y = this.jumpDescriptor.landingPosition.y;\n  }\n\n  this.velocity.set(0, 0, 0);\n  this.linearAcceleration.set(0, 0, 0);\n\n  this.setLimitVelocity(true);\n\n  if (!isCancel && this.jumpCompletionCallback){\n    this.jumpCompletionCallback(this);\n  }\n}\n\nSteerable.prototype.setJumpCompletionListener = function(callback){\n  this.jumpCompletionCallback = callback;\n}\n\nSteerable.prototype.removeJumpCompletionListener = function(){\n  this.jumpCompletionCallback = null;\n}\n\nObject.defineProperty(Steerable.prototype, 'constructor', { value: Steerable,  enumerable: false, writable: true });\nexport { Steerable };\n","import { Vector3D } from \"../core/Vector3D\";\n\nvar SteerResult = function(){\n  this.linear = new Vector3D();\n}\n\nexport { SteerResult };\n","import { MathUtils } from \"../core/MathUtils\";\n\nvar mathUtils = new MathUtils();\n\nvar JumpDescriptor = function(parameters){\n  this.takeoffPosition = parameters.takeoffPosition.clone();\n  this.landingPosition = parameters.landingPosition.clone();\n  this.takeoffPositionSatisfactionRadius = parameters.takeoffPositionSatisfactionRadius;\n\n  this.delta = this.landingPosition.clone().sub(this.takeoffPosition);\n\n  this.checkTimeResult = { vx: 0, vz: 0, isAchievable: false };\n\n  this.cache = {};\n\n  this._internalID = mathUtils.uuidv4();\n}\n\nJumpDescriptor.prototype.getEquationResult = function(steerable){\n  var jumpSpeed = steerable.jumpSpeed;\n  var maxSpeed = steerable.maxSpeed;\n  var gravity = steerable.world.gravity;\n\n  var cache = this.cache;\n\n  var obj;\n\n  if (cache[jumpSpeed]){\n    if (cache[jumpSpeed][maxSpeed]){\n      if (cache[jumpSpeed][maxSpeed][gravity]){\n        return cache[jumpSpeed][maxSpeed][gravity];\n      }\n    }\n  }\n\n  return null;\n}\n\nJumpDescriptor.prototype.setCache = function(steerable, equationResult){\n  var jumpSpeed = steerable.jumpSpeed;\n  var maxSpeed = steerable.maxSpeed;\n  var gravity = steerable.world.gravity;\n\n  var cache = this.cache;\n\n  if (!cache[jumpSpeed]){\n    cache[jumpSpeed] = {};\n  }\n\n  if (!cache[jumpSpeed][maxSpeed]){\n    cache[jumpSpeed][maxSpeed] = {};\n  }\n\n  if (!cache[jumpSpeed][maxSpeed][gravity]){\n    cache[jumpSpeed][maxSpeed] = {};\n  }\n\n  cache[jumpSpeed][maxSpeed][gravity] = equationResult;\n}\n\nJumpDescriptor.prototype.solveQuadraticEquation = function(steerable){\n\n  var equationResult = this.getEquationResult(steerable);\n  if (equationResult){\n    return equationResult;\n  }\n\n  equationResult = { time: 0, vx: 0, vz: 0, isAchievable: false };\n  this.setCache(steerable, equationResult);\n\n  equationResult.isAchievable = false;\n\n  var jumpSpeed = steerable.jumpSpeed;\n  var maxSpeed = steerable.maxSpeed;\n\n  var world = steerable.world;\n  var gravity = world.gravity;\n\n  var discriminant = (2 * gravity * this.delta.y) + (jumpSpeed * jumpSpeed);\n  var discriminantSqrt = Math.sqrt(discriminant);\n\n  var jumpTimeCandidate = (-jumpSpeed + discriminantSqrt) / gravity;\n\n  var result = this.checkTime(jumpTimeCandidate, maxSpeed);\n\n  equationResult.time = jumpTimeCandidate;\n  equationResult.vx = result.vx;\n  equationResult.vz = result.vz;\n  equationResult.isAchievable = result.isAchievable;\n\n  if (!result.isAchievable){\n    jumpTimeCandidate = (-jumpSpeed - discriminantSqrt) / gravity;\n    result = this.checkTime(jumpTimeCandidate, maxSpeed);\n\n    equationResult.time = jumpTimeCandidate;\n    equationResult.vx = result.vx;\n    equationResult.vz = result.vz;\n    equationResult.isAchievable = result.isAchievable;\n  }\n\n  if (!equationResult.isAchievable){\n    return false;\n  }\n\n  return equationResult;\n}\n\nJumpDescriptor.prototype.checkTime = function(time, maxSpeed){\n\n  this.checkTimeResult.isAchievable = false;\n\n  var vx = this.delta.x / time;\n  var vz = this.delta.z / time;\n\n  var sq = (vx * vx) + (vz * vz);\n\n  if (sq <= maxSpeed * maxSpeed){\n    this.checkTimeResult.isAchievable = true;\n    this.checkTimeResult.vx = vx;\n    this.checkTimeResult.vz = vz;\n  }\n\n  return this.checkTimeResult;\n}\n\nexport { JumpDescriptor };\n","import { SteerResult } from \"../SteerResult\";\n\nvar SteeringBehavior = function(){\n  this.result = new SteerResult();\n}\n\nSteeringBehavior.prototype.compute = function(){\n  this.result.linear.set(0, 0, 0);\n  return this.result;\n}\n\nexport { SteeringBehavior }\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"SeekBehavior\";\nvar LOG_NO_TARGET_POSITION = \"No target position.\";\nvar LOG_SPEEDING_UP = \"Speeding up.\";\n\nvar SeekBehavior = function(){\n  SteeringBehavior.call(this);\n}\n\nSeekBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nSeekBehavior.prototype.compute = function(steerable){\n\n  this.result.linear.set(0, 0, 0);\n\n  if (!steerable.hasTargetPosition){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_TARGET_POSITION, steerable.id);\n    return this.result;\n  }\n\n  this.result.linear.copy(steerable.targetPosition).sub(steerable.position).normalize().multiplyScalar(steerable.maxAcceleration);\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_SPEEDING_UP, steerable.id);\n\n  return this.result;\n}\n\nObject.defineProperty(SeekBehavior.prototype, 'constructor', { value: SeekBehavior,  enumerable: false, writable: true });\nexport { SeekBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { logger } from \"../../debug/Logger\";\n\nvar vectorPool = new VectorPool(10);\n\nvar LOGGER_COMPONENT_NAME = \"ArriveBehavior\";\nvar LOG_ARRIVED = \"Arrived.\";\nvar LOG_SLOWING_DOWN = \"Slowing down.\";\nvar LOG_SPEEDING_UP = \"Speeding up.\";\nvar LOG_NO_TARGET_POSITION = \"Steerable has no target position.\";\n\nvar ArriveBehavior = function(options){\n  SteeringBehavior.call(this);\n\n  this.satisfactionRadius = options.satisfactionRadius;\n  this.slowDownRadius = options.slowDownRadius;\n}\n\nArriveBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nArriveBehavior.prototype.compute = function(steerable){\n\n  this.result.linear.set(0, 0, 0);\n\n  if (!steerable.hasTargetPosition){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_TARGET_POSITION, steerable.id);\n    return this.result;\n  }\n\n  var toTarget = vectorPool.get().copy(steerable.targetPosition).sub(steerable.position);\n  var distance = toTarget.getLength();\n\n  var targetVelocity = vectorPool.get().set(0, 0, 0);\n\n  if (distance <= this.satisfactionRadius){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_ARRIVED, steerable.id);\n    this.result.linear.copy(steerable.velocity);\n    this.result.linear.negate();\n    return this.result;\n  }\n\n  targetVelocity.copy(toTarget).normalize().multiplyScalar(steerable.maxSpeed);\n\n  if (distance <= this.slowDownRadius){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_SLOWING_DOWN, steerable.id);\n    targetVelocity.multiplyScalar(distance / this.slowDownRadius);\n  }else{\n    logger.log(LOGGER_COMPONENT_NAME, LOG_SPEEDING_UP, steerable.id);\n  }\n\n  this.result.linear.copy(targetVelocity).sub(steerable.velocity);\n\n  return this.result;\n}\n\nObject.defineProperty(ArriveBehavior.prototype, 'constructor', { value: ArriveBehavior,  enumerable: false, writable: true });\nexport { ArriveBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { Box } from \"../../core/Box\";\nimport { Vector3D } from \"../../core/Vector3D\";\nimport { Vertex } from \"../../core/Vertex\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { logger } from \"../../debug/Logger\";\n\nvar box = new Box(new Vector3D(), new Vector3D());\nvar vectorPool = new VectorPool(10);\n\nvar LOGGER_COMPONENT_NAME = \"AvoidBehavior\";\nvar NO_THREATENING_ENTITY_FOUND = \"No threatening entity found.\";\nvar THREATENING_ENTITY_FOUND = \"Threatening entity found.\";\n\nvar AvoidBehavior = function(options){\n  SteeringBehavior.call(this);\n\n  this.maxSeeAhead = options.maxSeeAhead;\n  this.maxAvoidForce = options.maxAvoidForce;\n}\n\nAvoidBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nAvoidBehavior.prototype.findMostThreateningObstacle = function(steerable){\n  var mostThreatening = null;\n\n  var maxSeeAhead = this.maxSeeAhead;\n\n  var position = steerable.position;\n  var velocity = vectorPool.get().copy(steerable.velocity);\n  velocity.normalize().multiplyScalar(maxSeeAhead);\n  var vec2 = vectorPool.get().copy(velocity).add(position);\n  box.setFromTwoVectors(position, vec2, 0.001);\n  box.expandByPoint(steerable.box.min);\n  box.expandByPoint(steerable.box.max);\n\n  steerable.executeForEachCloseEntity(function(entity){\n\n    if (entity instanceof Vertex){\n      return;\n    }\n\n    if (box.intersectsBox(entity.box)){\n      if (!mostThreatening){\n        mostThreatening = entity;\n      }else{\n        var distance = vectorPool.get().copy(position).sub(entity.position).getLength();\n        var curDistance = vectorPool.get().copy(position).sub(mostThreatening.position).getLength();\n        if (distance <= curDistance){\n          mostThreatening = entity;\n        }\n      }\n    }\n  });\n\n  return mostThreatening;\n}\n\nAvoidBehavior.prototype.compute = function(steerable){\n  this.result.linear.set(0, 0, 0);\n\n  var mostThreateningObstacle = this.findMostThreateningObstacle(steerable);\n\n  if (!mostThreateningObstacle){\n    logger.log(LOGGER_COMPONENT_NAME, NO_THREATENING_ENTITY_FOUND, steerable.id);\n    return this.result;\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, THREATENING_ENTITY_FOUND, steerable.id);\n\n  this.result.linear.copy(steerable.velocity).normalize().multiplyScalar(steerable.velocity.getLength() / steerable.maxSpeed).add(steerable.position).sub(mostThreateningObstacle.position).normalize().multiplyScalar(this.maxAvoidForce);;\n  return this.result;\n}\n\nObject.defineProperty(AvoidBehavior.prototype, 'constructor', { value: AvoidBehavior,  enumerable: false, writable: true });\nexport { AvoidBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\n\nvar vectorPool = new VectorPool(10);\n\nvar BlendedSteeringBehavior = function(list){\n  SteeringBehavior.call(this);\n\n  this.definitions = list;\n}\n\nBlendedSteeringBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nBlendedSteeringBehavior.prototype.compute = function(steerable){\n\n  this.result.linear.set(0, 0, 0);\n\n  for (var i = 0; i < this.definitions.length; i ++){\n    var elem = this.definitions[i];\n    var behavior = elem.behavior;\n    var weight = elem.weight;\n\n    var result = behavior.compute(steerable);\n    if (result){\n      this.result.linear.add(vectorPool.get().copy(result.linear).multiplyScalar(weight));\n    }\n  }\n\n  return this.result;\n}\n\nObject.defineProperty(BlendedSteeringBehavior.prototype, 'constructor', { value: BlendedSteeringBehavior,  enumerable: false, writable: true });\nexport { BlendedSteeringBehavior };\n","import { SeekBehavior } from \"./SeekBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"PursueBehavior\";\nvar LOG_NO_TARGET_ENTITY = \"Entity has no target entity.\";\nvar LOG_SEEKING = \"Seeking.\";\n\nvar vectorPool = new VectorPool(10);\n\nvar PursueBehavior = function(options){\n  SeekBehavior.call(this);\n\n  this.maxPredictionTime = options.maxPredictionTime;\n}\n\nPursueBehavior.prototype = Object.create(SeekBehavior.prototype);\n\nPursueBehavior.prototype.compute = function(steerable){\n\n  this.result.linear.set(0, 0, 0);\n\n  if (!steerable.hasTargetEntity){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_TARGET_ENTITY, steerable.id);\n    return this.result;\n  }\n\n  var targetEntity = steerable.targetEntity;\n\n  var targetPosition = targetEntity.position;\n  var speed = steerable.velocity.getLength();\n\n  var predictionTime = this.maxPredictionTime;\n  if (speed > 0){\n    var distance = vectorPool.get().copy(targetPosition).sub(steerable.position).getLength();\n    var tmpPredictionTime = distance / speed;\n    if (tmpPredictionTime < this.maxPredictionTime){\n      predictionTime = tmpPredictionTime;\n    }\n  }\n\n  var v = vectorPool.get().copy(targetEntity.velocity).multiplyScalar(predictionTime).add(targetPosition);\n  steerable.setTargetPosition(v);\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_SEEKING, steerable.id);\n\n  return SeekBehavior.prototype.compute.call(this, steerable);\n}\n\nObject.defineProperty(PursueBehavior.prototype, 'constructor', { value: SeekBehavior,  enumerable: false, writable: true });\nexport { PursueBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\n\nvar vectorPool = new VectorPool(10);\n\nvar LookWhereYouAreGoingBehavior = function(){\n  SteeringBehavior.call(this);\n}\n\nLookWhereYouAreGoingBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nLookWhereYouAreGoingBehavior.prototype.compute = function(steerable){\n  this.result.linear.set(0, 0, 0);\n\n  var target = vectorPool.get().copy(steerable.position).add(steerable.velocity);\n\n  steerable.setLookTarget(target);\n\n  return this.result;\n}\n\nObject.defineProperty(LookWhereYouAreGoingBehavior.prototype, 'constructor', { value: LookWhereYouAreGoingBehavior,  enumerable: false, writable: true });\nexport { LookWhereYouAreGoingBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { Quaternion } from \"../../core/Quaternion\";\n\nvar vectorPool = new VectorPool(10);\nvar quaternion = new Quaternion();\n\nvar Wander2DBehavior = function(options){\n  SteeringBehavior.call(this);\n\n  this.normal = options.normal.clone().normalize();\n  this.wanderCircleDistance = options.wanderCircleDistance;\n  this.wanderCircleRadius = options.wanderCircleRadius;\n  this.angleChange = options.angleChange;\n  this.angle = 0;\n}\n\nWander2DBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nWander2DBehavior.prototype.compute = function(steerable){\n  var circleCenter = this.getCircleCenter(steerable);\n  var displacementForce = this.getDisplacementForce();\n\n  this.result.linear.copy(circleCenter).add(displacementForce);\n\n  this.angle += Math.random() * this.angleChange - this.angleChange * 0.5;\n\n  return this.result;\n}\n\nWander2DBehavior.prototype.getCircleCenter = function(steerable){\n  var dist = this.wanderCircleDistance;\n  return vectorPool.get().copy(steerable.velocity).normalize().multiplyScalar(dist);\n}\n\nWander2DBehavior.prototype.getDisplacementForce = function(){\n  var displacementForce = vectorPool.get().set(0, 0, 0);\n  displacementForce.x = Math.cos(this.angle);\n  displacementForce.z = Math.sin(this.angle);\n  displacementForce.normalize().multiplyScalar(this.wanderCircleRadius);\n  var quatdiff = quaternion.setFromVectors(vectorPool.get().set(0, 1, 0), this.normal);\n  displacementForce.applyQuaternion(quatdiff);\n  return displacementForce;\n}\n\nObject.defineProperty(Wander2DBehavior.prototype, 'constructor', { value: Wander2DBehavior,  enumerable: false, writable: true });\nexport { Wander2DBehavior };\n","import { Wander2DBehavior } from \"./Wander2DBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { Vector3D } from \"../../core/Vector3D\";\n\nvar vectorPool = new VectorPool(10);\n\nvar Wander3DBehavior = function(options){\n  Wander2DBehavior.call(this, {\n    wanderCircleDistance: options.wanderSphereDistance,\n    angleChange: options.angleChange,\n    normal: new Vector3D()\n  });\n\n  this.angle2 = 0;\n\n  this.wanderSphereRadius = options.wanderSphereRadius;\n}\n\nWander3DBehavior.prototype = Object.create(Wander2DBehavior.prototype);\n\nWander3DBehavior.prototype.compute = function(steerable){\n  var circleCenter = this.getCircleCenter(steerable);\n  var displacementForce = this.getDisplacementForce();\n\n  this.result.linear.copy(circleCenter).add(displacementForce);\n\n  this.angle += Math.random() * this.angleChange - this.angleChange * 0.5;\n  this.angle2 += Math.random() * this.angleChange - this.angleChange * 0.5;\n\n  return this.result;\n}\n\nWander3DBehavior.prototype.getDisplacementForce = function(){\n  var displacementForce = vectorPool.get().set(0, 0, 0);\n  displacementForce.x = Math.sin(this.angle) * Math.cos(this.angle2);\n  displacementForce.y = Math.sin(this.angle) * Math.sin(this.angle2);\n  displacementForce.z = Math.cos(this.angle);\n\n  return displacementForce.normalize().multiplyScalar(this.wanderSphereRadius);\n}\n\nObject.defineProperty(Wander3DBehavior.prototype, 'constructor', { value: Wander3DBehavior,  enumerable: false, writable: true });\nexport { Wander3DBehavior };\n","import { SeekBehavior } from \"./SeekBehavior\";\n\nvar FleeBehavior = function(){\n  SeekBehavior.call(this);\n}\n\nFleeBehavior.prototype = Object.create(SeekBehavior.prototype);\n\nFleeBehavior.prototype.compute = function(steerable){\n  SeekBehavior.prototype.compute.call(this, steerable);\n  this.result.linear.negate();\n  return this.result;\n}\n\nObject.defineProperty(FleeBehavior.prototype, 'constructor', { value: FleeBehavior,  enumerable: false, writable: true });\nexport { FleeBehavior };\n","import { PursueBehavior } from \"./PursueBehavior\";\n\nvar EvadeBehavior = function(options){\n  PursueBehavior.call(this, options);\n}\n\nEvadeBehavior.prototype = Object.create(PursueBehavior.prototype);\n\nEvadeBehavior.prototype.compute = function(steerable){\n  PursueBehavior.prototype.compute.call(this, steerable);\n  this.result.linear.negate();\n  return this.result;\n}\n\nObject.defineProperty(EvadeBehavior.prototype, 'constructor', { value: EvadeBehavior,  enumerable: false, writable: true });\nexport { EvadeBehavior };\n","import { SeekBehavior } from \"./SeekBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { logger } from \"../../debug/Logger\";\n\nvar vectorPool = new VectorPool(10);\n\nvar LOGGER_COMPONENT_NAME = \"PathFollowingBehavior\";\nvar LOG_NO_WAYPOINT = \"No waypoint.\";\nvar LOG_JUMP_INITIATED = \"Jump initiated.\";\nvar LOG_NEXT_WAYPOINT = \"Next waypoint.\";\nvar LOG_PATH_COMPLETED = \"Path completed.\";\n\nvar PathFollowingBehavior = function(options){\n  SeekBehavior.call(this);\n\n  this.path = options.path;\n  this.satisfactionRadius = options.satisfactionRadius || 0;\n\n  this.onJumpCompletionCallback = this.onJumpCompleted.bind(this);\n}\n\nPathFollowingBehavior.prototype = Object.create(SeekBehavior.prototype);\n\nPathFollowingBehavior.prototype.getNext = function(){\n  var path = this.path;\n  path.next();\n  return path.getCurrentWaypoint();\n}\n\nPathFollowingBehavior.prototype.getCurrentWaypoint = function(){\n  return this.path.getCurrentWaypoint();\n}\n\nPathFollowingBehavior.prototype.compute = function(steerable){\n  this.result.linear.set(0, 0, 0);\n  var path = this.path;\n\n  var currentWayPoint = this.getCurrentWaypoint();\n  if (!currentWayPoint){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_WAYPOINT, steerable.id);\n    return this.result;\n  }\n\n  var jumpDescriptor = this.isJumpNeeded(steerable);\n  if (jumpDescriptor){\n    this.beforeJumpBehavior = steerable.behavior;\n    steerable.jumpDescriptor = jumpDescriptor;\n    steerable.onJumpReady();\n    steerable.setJumpCompletionListener(this.onJumpCompletionCallback);\n    logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_INITIATED, steerable.id);\n    return this.result;\n  }\n\n  var distance = vectorPool.get().copy(currentWayPoint).sub(steerable.position).getLength();\n\n  if (distance <= this.satisfactionRadius){\n    currentWayPoint = this.getNext();\n\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NEXT_WAYPOINT, steerable.id);\n\n    if (!currentWayPoint){\n      logger.log(LOGGER_COMPONENT_NAME, LOG_PATH_COMPLETED, steerable.id);\n      return this.result;\n    }\n  }\n\n  steerable.setTargetPosition(currentWayPoint);\n  return SeekBehavior.prototype.compute.call(this, steerable);\n}\n\nPathFollowingBehavior.prototype.isJumpNeeded = function(steerable){\n\n  var path = this.path;\n  var jumpDescriptors = path.jumpDescriptors;\n\n  for (var i = 0; i < path.jumpDescriptorLength; i ++){\n    var jumpDescriptor = jumpDescriptors[i];\n    var distToTakeoffPosition = vectorPool.get().copy(steerable.position).sub(jumpDescriptor.takeoffPosition).getLength();\n    if (distToTakeoffPosition < jumpDescriptor.takeoffPositionSatisfactionRadius){\n      var quadraticEquationResult = jumpDescriptor.solveQuadraticEquation(steerable);\n      if (quadraticEquationResult){\n        return jumpDescriptor;\n      }\n    }\n  }\n\n  return false;\n}\n\nPathFollowingBehavior.prototype.onJumpCompleted = function(steerable){\n  var jumpDescriptor = steerable.jumpDescriptor;\n  var landingPosition = jumpDescriptor.landingPosition;\n  var path = this.path;\n\n  var landingPositionIndex = path.getWaypointIndex(landingPosition);\n\n  while(path.index != landingPositionIndex && !path.isFinished){\n    path.next();\n  }\n\n  steerable.setBehavior(this.beforeJumpBehavior);\n}\n\nObject.defineProperty(PathFollowingBehavior.prototype, 'constructor', { value: PathFollowingBehavior,  enumerable: false, writable: true });\nexport { PathFollowingBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"PrioritySteeringBehavior\";\nvar LOG_COMPUTED = \"Computed.\";\nvar LOG_NOT_COMPUTED = \"Not computed.\";\n\nvar PrioritySteeringBehavior = function(options){\n  SteeringBehavior.call(this);\n\n  this.threshold = options.threshold;\n\n  this.list = options.list;\n}\n\nPrioritySteeringBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nPrioritySteeringBehavior.prototype.compute = function(steerable){\n  this.result.linear.set(0, 0, 0);\n\n  for (var i = 0; i < this.list.length; i ++){\n    var result = this.list[i].compute(steerable);\n    if (result.linear.getLength() > this.threshold){\n      this.result.linear.copy(result.linear);\n      logger.log(LOGGER_COMPONENT_NAME, LOG_COMPUTED, steerable.id);\n      return this.result;\n    }\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_NOT_COMPUTED, steerable.id);\n  return this.result;\n}\n\nObject.defineProperty(PrioritySteeringBehavior.prototype, 'constructor', { value: PrioritySteeringBehavior,  enumerable: false, writable: true });\nexport { PrioritySteeringBehavior };\n","import { ArriveBehavior } from \"./ArriveBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { Vector3D } from \"../../core/Vector3D\";\nimport { Steerable } from \"../Steerable\";\nimport { Vertex } from \"../../core/Vertex\";\nimport { logger } from \"../../debug/Logger\";\n\nvar vectorPool = new VectorPool(10);\n\nvar LOGGER_COMPONENT_NAME = \"HideBehavior\";\nvar LOG_NO_HIDE_TARGET_ENTITY = \"No hide target entity set.\";\nvar LOG_TARGET_ENTITY_OUT_OF_THREAT_DISTANCE = \"Target entity is out of threat distance.\";\nvar LOG_NO_HIDING_SPOT_FOUND = \"No hiding spot found.\";\nvar LOG_HIDING = \"Hiding.\";\n\nvar HideBehavior = function(options){\n  ArriveBehavior.call(this, {\n    satisfactionRadius: options.arriveSatisfactionRadius,\n    slowDownRadius: options.arriveSlowDownRadius\n  });\n\n  this.hideDistance = options.hideDistance;\n  this.threatDistance = options.threatDistance;\n\n  this.hidingSpotFound = false;\n  this.bestHidingSpot = new Vector3D();\n}\n\nHideBehavior.prototype = Object.create(ArriveBehavior.prototype);\n\nHideBehavior.prototype.compute = function(steerable){\n  this.result.linear.set(0, 0, 0);\n\n  if (!steerable.hideTargetEntity){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_HIDE_TARGET_ENTITY, steerable.id);\n    return this.result;\n  }\n\n  if (vectorPool.get().copy(steerable.position).sub(steerable.hideTargetEntity.position).getLength() > this.threatDistance){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_TARGET_ENTITY_OUT_OF_THREAT_DISTANCE, steerable.id);\n    return this.result;\n  }\n\n  this.findHidingSpot(steerable);\n\n  if (!this.hidingSpotFound){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_HIDING_SPOT_FOUND, steerable.id);\n    return this.result;\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_HIDING, steerable.id);\n\n  steerable.setTargetPosition(this.bestHidingSpot);\n\n  return ArriveBehavior.prototype.compute.call(this, steerable);\n}\n\nHideBehavior.prototype.findHidingSpot = function(steerable){\n\n  this.hidingSpotFound = false;\n\n  var closest = null;\n\n  var self = this;\n\n  steerable.executeForEachCloseEntity(function(entity){\n    if (entity instanceof Steerable || entity instanceof Vertex || entity.excludeFromHide){\n      return;\n    }\n\n    var hidingPosition = self.getHidingPosition(entity, steerable);\n\n    var dist = vectorPool.get().copy(hidingPosition).sub(steerable.position).getLength();\n\n    if (closest == null || dist < closest){\n      closest = dist;\n      self.hidingSpotFound = true;\n      self.bestHidingSpot.copy(hidingPosition);\n    }\n  });\n}\n\nHideBehavior.prototype.getHidingPosition = function(hideableEntity, steerable){\n  var targetPosition = steerable.hideTargetEntity.position;\n\n  var hideableRadius = hideableEntity.box.getBoundingRadius();\n\n  var distanceAwayFromHideable = hideableRadius + this.hideDistance;\n\n  var hideableEntityPosition = hideableEntity.position;\n\n  return vectorPool.get().copy(hideableEntityPosition).sub(targetPosition).normalize().multiplyScalar(distanceAwayFromHideable).add(hideableEntityPosition);\n}\n\nObject.defineProperty(HideBehavior.prototype, 'constructor', { value: HideBehavior,  enumerable: false, writable: true });\nexport { HideBehavior };\n","import { PathFollowingBehavior } from \"./PathFollowingBehavior\";\n\nvar RandomWaypointBehavior = function(options){\n  PathFollowingBehavior.call(this, options);\n}\n\nRandomWaypointBehavior.prototype = Object.create(PathFollowingBehavior.prototype);\n\nRandomWaypointBehavior.prototype.getNext = function(){\n  var path = this.path;\n  this.currentWayPoint = path.getRandomWaypoint();\n  return this.currentWayPoint;\n}\n\nRandomWaypointBehavior.prototype.getCurrentWaypoint = function(){\n  if (!this.currentWayPoint){\n    return this.getNext();\n  }\n\n  return this.currentWayPoint;\n}\n\nObject.defineProperty(RandomWaypointBehavior.prototype, 'constructor', { value: RandomWaypointBehavior,  enumerable: false, writable: true });\nexport { RandomWaypointBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { Steerable } from \"../Steerable\";\n\nvar vectorPool = new VectorPool(10);\n\nvar SeparationBehavior = function(options){\n  SteeringBehavior.call(this);\n\n  this.strength = options.strength;\n}\n\nSeparationBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nSeparationBehavior.prototype.compute = function(steerable){\n  var linear = this.result.linear;\n\n  linear.set(0, 0, 0);\n\n  var strength = this.strength;\n  steerable.executeForEachCloseEntity(function(entity){\n    if (!(entity instanceof Steerable)){\n      return;\n    }\n\n    var vec = vectorPool.get().copy(steerable.position).sub(entity.position);\n\n    var len = vec.getLength();\n\n    if (len == 0){\n      return;\n    }\n\n    vec.normalize().multiplyScalar(strength / len);\n    linear.add(vec);\n  });\n\n  return this.result;\n}\n\nObject.defineProperty(SeparationBehavior.prototype, 'constructor', { value: SeparationBehavior,  enumerable: false, writable: true });\nexport { SeparationBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { Steerable } from \"../Steerable\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"AlignBehavior\";\nvar LOG_CLOSE_ENTITIES_EXIST = \"Close entities exist.\";\nvar LOG_NO_CLOSE_ENTITIES_EXIST = \"No close entities exist.\";\n\nvar AlignBehavior = function(){\n  SteeringBehavior.call(this);\n}\n\nAlignBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nAlignBehavior.prototype.compute = function(steerable){\n  var linear = this.result.linear;\n\n  linear.set(0, 0, 0);\n\n  var count = 0;\n\n  steerable.executeForEachCloseEntity(function(entity){\n    if (!(entity instanceof Steerable)){\n      return;\n    }\n\n    linear.add(entity.velocity);\n\n    count ++;\n  });\n\n  if (count > 0){\n    linear.multiplyScalar(1 / count);\n    linear.sub(steerable.velocity);\n    logger.log(LOGGER_COMPONENT_NAME, LOG_CLOSE_ENTITIES_EXIST, steerable.id);\n  }else{\n    logger.log(LOGGER_COMPONENT_NAME, LOG_NO_CLOSE_ENTITIES_EXIST, steerable.id);\n  }\n\n  return this.result;\n}\n\nObject.defineProperty(AlignBehavior.prototype, 'constructor', { value: AlignBehavior,  enumerable: false, writable: true });\nexport { AlignBehavior };\n","import { SeekBehavior } from \"./SeekBehavior\";\nimport { Steerable } from \"../Steerable\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"CohesionBehavior\";\nvar LOG_CLOSE_ENTITIES_EXIST = \"Close entities exist.\";\nvar LOG_NO_CLOSE_ENTITIES_EXIST = \"No close entities exist.\";\n\nvar CohesionBehavior = function(){\n  SeekBehavior.call(this);\n}\n\nCohesionBehavior.prototype = Object.create(SeekBehavior.prototype);\n\nCohesionBehavior.prototype.compute = function(steerable){\n  var linear = this.result.linear;\n\n  linear.set(0, 0, 0);\n\n  var count = 0;\n\n  steerable.executeForEachCloseEntity(function(entity){\n    if (!(entity instanceof Steerable)){\n      return;\n    }\n\n    linear.add(entity.position);\n\n    count ++;\n  });\n\n  if (count > 0){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_CLOSE_ENTITIES_EXIST, steerable.id);\n    linear.multiplyScalar(1 / count);\n    steerable.setTargetPosition(linear);\n    return SeekBehavior.prototype.compute.call(this, steerable);\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_NO_CLOSE_ENTITIES_EXIST, steerable.id);\n\n  return this.result;\n}\n\nObject.defineProperty(CohesionBehavior.prototype, 'constructor', { value: CohesionBehavior,  enumerable: false, writable: true });\nexport { CohesionBehavior };\n","import { SteeringBehavior } from \"./SteeringBehavior\";\nimport { VectorPool } from \"../../core/VectorPool\";\nimport { logger } from \"../../debug/Logger\";\n\nvar vectorPool = new VectorPool(10);\n\nvar LOGGER_COMPONENT_NAME = \"JumpBehavior\";\nvar LOG_JUMP_NOT_READY = \"Jump not ready.\";\nvar LOG_JUMP_ALREADY_TOOK_OFF = \"Jump already took off.\";\nvar LOG_EQUATION_RESULT_TIME_ZERO = \"Equation result time is zero.\";\nvar LOG_TAKING_OFF = \"Taking off.\";\nvar LOG_MATCHING_VELOCITY = \"Matching velocity.\";\n\nvar JumpBehavior = function(){\n  SteeringBehavior.call(this);\n}\n\nJumpBehavior.prototype = Object.create(SteeringBehavior.prototype);\n\nJumpBehavior.prototype.compute = function(steerable){\n  var linear = this.result.linear;\n\n  linear.set(0, 0, 0);\n\n  if (!steerable.isJumpReady){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_NOT_READY, steerable.id);\n    return this.result;\n  }\n\n  if (steerable.isJumpTakenOff){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_JUMP_ALREADY_TOOK_OFF, steerable.id);\n    return this.result;\n  }\n\n  var jumpDescriptor = steerable.jumpDescriptor;\n  var equationResult = jumpDescriptor.getEquationResult(steerable);\n\n  if (equationResult.time == 0){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_EQUATION_RESULT_TIME_ZERO, steerable.id);\n    return this.result;\n  }\n\n  var targetVelocity = vectorPool.get().set(equationResult.vx, 0, equationResult.vz);\n  if (steerable.velocity.eql(targetVelocity)){\n    steerable.onJumpTakeOff();\n    logger.log(LOGGER_COMPONENT_NAME, LOG_TAKING_OFF, steerable.id);\n    return this.result;\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_MATCHING_VELOCITY, steerable.id);\n\n  steerable.velocity.copy(targetVelocity);\n  return this.result;\n}\n\nObject.defineProperty(JumpBehavior.prototype, 'constructor', { value: JumpBehavior,  enumerable: false, writable: true });\nexport { JumpBehavior };\n","import { PathFollowingBehavior } from \"./PathFollowingBehavior\";\nimport { AStar } from \"../../core/AStar\";\nimport { Vector3D } from \"../../core/Vector3D\";\nimport { logger } from \"../../debug/Logger\";\n\nvar LOGGER_COMPONENT_NAME = \"RandomPathBehavior\";\nvar LOG_PATH_CONSTRUCTED = \"Path constructed.\";\nvar LOG_FOLLOWING_PATH = \"Following path.\";\nvar LOG_CLOSEST_POINT_NOT_FOUND = \"Closest point not found.\";\n\nvar RandomPathBehavior = function(options){\n\n  var graph = options.graph;\n  var aStar = new AStar(graph);\n\n  var allVertices = [];\n  graph.forEachVertex(function(x, y, z){\n    allVertices.push(new Vector3D(x, y, z));\n  });\n\n  PathFollowingBehavior.call(this, {\n    path: aStar.path,\n    satisfactionRadius: options.satisfactionRadius\n  });\n\n  this.aStar = aStar;\n  this.allVertices = allVertices;\n  this.isPathConstructed = false;\n\n  aStar.path.addFinishCallback(function(){\n    this.isPathConstructed = false;\n  }.bind(this));\n}\n\nRandomPathBehavior.prototype = Object.create(PathFollowingBehavior.prototype);\n\nRandomPathBehavior.prototype.getRandomWaypoint = function(){\n  var allVertices = this.allVertices;\n  return allVertices[Math.floor(Math.random() * allVertices.length)] || null;\n}\n\nRandomPathBehavior.prototype.constructPath = function(steerable){\n\n  var iterate = true;\n  var aStar = this.aStar;\n  var graph = aStar.graph;\n\n  while (iterate){\n    var startPoint = graph.findClosestVertexToPoint(steerable.position);\n    if (!startPoint){\n      startPoint = this.getRandomWaypoint();\n      logger.log(LOGGER_COMPONENT_NAME, LOG_CLOSEST_POINT_NOT_FOUND, steerable.id);\n    }\n    var endPoint = this.getRandomWaypoint();\n\n    var path = aStar.findShortestPath(startPoint, endPoint);\n\n    iterate = !path;\n  }\n\n  this.isPathConstructed = true;\n}\n\nRandomPathBehavior.prototype.compute = function(steerable){\n  if (!this.isPathConstructed){\n    logger.log(LOGGER_COMPONENT_NAME, LOG_PATH_CONSTRUCTED, steerable.id);\n    this.constructPath(steerable);\n  }\n\n  logger.log(LOGGER_COMPONENT_NAME, LOG_FOLLOWING_PATH, steerable.id);\n\n  return PathFollowingBehavior.prototype.compute.call(this, steerable);\n}\n\nObject.defineProperty(RandomPathBehavior.prototype, 'constructor', { value: RandomPathBehavior,  enumerable: false, writable: true });\nexport { RandomPathBehavior };\n","import { Steerable } from \"../steering/Steerable\";\nimport { Box } from \"../core/Box\";\nimport { Vector3D } from \"../core/Vector3D\";\n\nvar box = new Box(new Vector3D(), new Vector3D());\nvar vect = new Vector3D();\n\nvar DebugHelper = function(world, threeInstance, scene){\n  this.world = world;\n  this.threeInstance = threeInstance;\n  this.scene = scene;\n\n  this.isActive = false;\n\n  this.limeMaterial = new threeInstance.MeshBasicMaterial({ color: \"lime\", wireframe: true });\n  this.magentaMaterial = new threeInstance.MeshBasicMaterial({ color: \"magenta\", wireframe: true });\n  this.redMaterial = new threeInstance.MeshBasicMaterial({ color : \"red\", wireframe: false });\n  this.orangeMaterial = new threeInstance.MeshBasicMaterial({ color: \"orange\", wireframe: false });\n  this.lineMaterial = new threeInstance.LineBasicMaterial({ color: \"cyan\" });\n\n  this.worldMesh = null;\n  this.meshesByEntityID = {};\n  this.velocityMeshesByEntityID = {};\n  this.lookMeshesByEntityID = {};\n  this.meshesByAStarIDs = {};\n  this.meshesByJumpDescriptorIDs = {};\n  this.visualisedAStars = {};\n  this.pathMeshes = [];\n  this.edgeMeshes = [];\n\n  this.LOOK_DISTANCE = 100;\n\n  this.world.onEntityInserted = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    this.addEntity(entity);\n  }.bind(this);\n\n  this.world.onEntityRemoved = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    var mesh = this.meshesByEntityID[entity.id];\n    this.scene.remove(mesh);\n    delete this.meshesByEntityID[entity.id];\n\n    if (entity instanceof Steerable){\n      var velocityMesh = this.velocityMeshesByEntityID[entity.id];\n      this.scene.remove(velocityMesh);\n      delete this.velocityMeshesByEntityID[entity.id];\n\n      var lookMesh = this.lookMeshesByEntityID[entity.id];\n      this.scene.remove(lookMesh);\n      delete this.lookMeshesByEntityID[entity.id];\n    }\n  }.bind(this);\n\n  this.world.onEntityUpdated = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    var mesh = this.meshesByEntityID[entity.id];\n    mesh.position.set(entity.position.x, entity.position.y, entity.position.z);\n\n    var params = mesh.geometry.parameters;\n    mesh.scale.set(entity.size.x / params.width, entity.size.y / params.height, entity.size.z / params.depth);\n\n    if (entity instanceof Steerable){\n      var velocityMesh = this.velocityMeshesByEntityID[entity.id];\n      vect.copy(entity.position).add(entity.velocity);\n      box.setFromTwoVectors(entity.position, vect, 5);\n      vect.x = (vect.x + entity.position.x) / 2;\n      vect.y = (vect.y + entity.position.y) / 2;\n      vect.z = (vect.z + entity.position.z) / 2;\n      velocityMesh.position.set(vect.x, vect.y, vect.z);\n      velocityMesh.scale.set(box.max.x - box.min.x, box.max.y - box.min.y, box.max.z - box.min.z);\n\n      var lookMesh = this.lookMeshesByEntityID[entity.id];\n      vect.copy(entity.lookDirection).normalize().multiplyScalar(this.LOOK_DISTANCE).add(entity.position);\n      lookMesh.position.set(vect.x, vect.y, vect.z);\n    }\n  }.bind(this);\n\n  this.world.onEntityHidden = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    var mesh = this.meshesByEntityID[entity.id];\n\n    mesh.visible = false;\n  }.bind(this);\n\n  this.world.onEntityShown = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    var mesh = this.meshesByEntityID[entity.id];\n\n    mesh.visible = true;\n  }.bind(this);\n\n  this.world.onEntityLookDirectionUpdated = function(entity){\n    if (!this.isActive){\n      return;\n    }\n    if (entity instanceof Steerable){\n      var lookMesh = this.lookMeshesByEntityID[entity.id];\n      vect.copy(entity.lookDirection).normalize().multiplyScalar(this.LOOK_DISTANCE).add(entity.position);\n      lookMesh.position.set(vect.x, vect.y, vect.z);\n    }\n  }.bind(this);\n}\n\nDebugHelper.prototype.visualiseJumpDescriptor = function(jumpDescriptor){\n  var id = jumpDescriptor._internalID;\n\n  if (this.meshesByJumpDescriptorIDs[id]){\n    return;\n  }\n\n  var p0 = jumpDescriptor.takeoffPosition.clone();\n  var p3 = jumpDescriptor.landingPosition.clone();\n\n  var p1 = new Vector3D(p0.x, p0.y + 100, p0.z);\n  var p2 = new Vector3D(p3.x, p3.y + 100, p3.z);\n\n  var curve = new this.threeInstance.CubicBezierCurve3(p0, p1, p2, p3);\n  var points = curve.getPoints(100);\n  var geometry = new this.threeInstance.BufferGeometry().setFromPoints(points);\n  var jdMesh = new this.threeInstance.Line(geometry, this.lineMaterial);\n\n  this.meshesByJumpDescriptorIDs[id] = jdMesh;\n\n  this.scene.add(jdMesh);\n}\n\nDebugHelper.prototype.visualisePath = function(path, overrideSize){\n  var boxSize = overrideSize || 5;\n\n  var meshes = [];\n\n  for (var i = 0; i < path.length; i ++){\n    var wp = path.waypoints[i];\n    var waypointMesh = new this.threeInstance.Mesh(new this.threeInstance.BoxBufferGeometry(boxSize, boxSize, boxSize), this.orangeMaterial);\n    waypointMesh.position.set(wp.x, wp.y, wp.z);\n    this.scene.add(waypointMesh);\n    this.pathMeshes.push(waypointMesh);\n    meshes.push(waypointMesh);\n  }\n\n  return meshes;\n}\n\nDebugHelper.prototype.visualiseAStar = function(aStar){\n  var id = aStar._internalID;\n  var aStarPathVisualSize = 15;\n\n  if (this.meshesByAStarIDs[id]){\n    return;\n  }\n\n  this.visualisedAStars[id] = true;\n\n  if (aStar.searchID > 0){\n    this.meshesByAStarIDs[id] = this.visualisePath(aStar.path, aStarPathVisualSize);\n  }\n\n  aStar.onPathConstructed = function(){\n\n    if (!this.visualisedAStars[id]){\n      return;\n    }\n\n    var meshes = this.meshesByAStarIDs[id] || [];\n\n    for (var i = 0; i < meshes.length; i ++){\n      var mesh = meshes[i];\n      this.scene.remove(mesh);\n      this.pathMeshes.splice(this.pathMeshes.indexOf(mesh), 1);\n    }\n\n    this.meshesByAStarIDs[id] = this.visualisePath(aStar.path, aStarPathVisualSize);\n  }.bind(this);\n}\n\nDebugHelper.prototype.visualiseGraph = function(graph){\n  var threeInstance = this.threeInstance;\n  var lineMaterial = this.lineMaterial;\n  var scene = this.scene;\n  var edgeMeshes = this.edgeMeshes;\n\n  graph.forEachEdge(function(edge){\n    var geom = new threeInstance.Geometry();\n    geom.vertices.push(edge.fromVertex);\n    geom.vertices.push(edge.toVertex);\n    var line = new threeInstance.Line(geom, lineMaterial);\n    scene.add(line);\n    edgeMeshes.push(line);\n  });\n}\n\nDebugHelper.prototype.addEntity = function(entity){\n  var mesh = this.createMeshFromEntity(entity);\n  this.meshesByEntityID[entity.id] = mesh;\n  this.scene.add(mesh);\n\n  if (entity.isHidden){\n    mesh.visible = false;\n  }\n\n  if (entity instanceof Steerable){\n    var velocityMesh = new this.threeInstance.Mesh(new this.threeInstance.BoxBufferGeometry(1, 1, 1), this.magentaMaterial);\n    velocityMesh.position.set(entity.position.x, entity.position.y, entity.position.z);\n    this.scene.add(velocityMesh);\n    this.velocityMeshesByEntityID[entity.id] = velocityMesh;\n\n    var lookMesh = new this.threeInstance.Mesh(new this.threeInstance.BoxBufferGeometry(5, 5, 5), this.redMaterial);\n    var lookPosition = new Vector3D().copy(entity.lookDirection).normalize().add(entity.position).multiplyScalar(this.LOOK_DISTANCE);\n    lookMesh.position.set(lookPosition.x, lookPosition.y, lookPosition.z);\n    this.scene.add(lookMesh);\n    this.lookMeshesByEntityID[entity.id] = lookMesh;\n  }\n}\n\nDebugHelper.prototype.activate = function(){\n  this.isActive = true;\n\n  var worldGeometry = new this.threeInstance.BoxBufferGeometry(this.world.width, this.world.height, this.world.depth);\n  this.worldMesh = new this.threeInstance.Mesh(worldGeometry, this.limeMaterial);\n  this.scene.add(this.worldMesh);\n\n  this.world.forEachEntity(function(entity){\n    this.addEntity(entity);\n  }.bind(this));\n}\n\nDebugHelper.prototype.deactivate = function(){\n  this.isActive = false;\n\n  this.scene.remove(this.worldMesh);\n  this.worldMesh = null;\n\n  for (var entityID in this.meshesByEntityID){\n    this.scene.remove(this.meshesByEntityID[entityID]);\n  }\n\n  for (var entityID in this.velocityMeshesByEntityID){\n    this.scene.remove(this.velocityMeshesByEntityID[entityID]);\n  }\n\n  for (var entityID in this.lookMeshesByEntityID){\n    this.scene.remove(this.lookMeshesByEntityID[entityID]);\n  }\n\n  for (var jdID in this.meshesByJumpDescriptorIDs){\n    this.scene.remove(this.meshesByJumpDescriptorIDs[jdID]);\n  }\n\n  for (var i = 0; i < this.pathMeshes.length; i ++){\n    this.scene.remove(this.pathMeshes[i]);\n  }\n\n  for (var i = 0; i < this.edgeMeshes.length; i ++){\n    this.scene.remove(this.edgeMeshes[i]);\n  }\n\n  this.meshesByEntityID = {};\n  this.velocityMeshesByEntityID = {};\n  this.lookMeshesByEntityID = {};\n  this.meshesByAStarIDs = {};\n  this.meshesByJumpDescriptorIDs = {};\n  this.visualisedAStars = {};\n  this.pathMeshes = [];\n  this.edgeMeshes = [];\n}\n\nDebugHelper.prototype.createMeshFromEntity = function(entity){\n  var boxGeometry = new this.threeInstance.BoxBufferGeometry(entity.size.x, entity.size.y, entity.size.z);\n  var mesh = new this.threeInstance.Mesh(boxGeometry, this.limeMaterial);\n  mesh.position.set(entity.position.x, entity.position.y, entity.position.z);\n\n  return mesh;\n}\n\nexport { DebugHelper };\n"],"names":["Vector3D","x","y","z","prototype","set","copy","vect","clone","multiplyScalar","scalar","min","Math","max","getLength","sqrt","add","sub","normalize","len","dot","applyQuaternion","quaternion","qx","qy","qz","qw","w","ix","iy","iz","iw","cross","vec","negate","eql","toFixed","num","getDistanceSq","xDiff","yDiff","zDiff","VectorPool","size","index","vectors","i","push","get","length","vectorPool","MathUtils","clamp","val","uuidv4","replace","c","r","random","v","toString","Box","centerPosition","setFromCenterAndSize","center","half","makeEmpty","Infinity","expandByPoint","point","intersectsBox","box","containsBox","setFromTwoVectors","vec1","vec2","thickness","isEmpty","getBoundingRadius","Nearby","width","height","depth","binSize","limitBox","createBox","bin","Map","reusableResultMap","bb","minX","maxX","minY","maxY","minZ","maxZ","halfWidth","halfHeight","halfDepth","createObject","id","self","obj","insert","BIN_SIZE","round","minXLower","minXUpper","maxXLower","maxXUpper","minYLower","minYUpper","maxYLower","maxYUpper","minZLower","minZUpper","maxZLower","maxZUpper","has","binInfo","query","rX","rY","rZ","result","clear","keyX","keyY","keyZ","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","keys","Symbol","iterator","_step","next","done","value","err","return","delete","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","update","mathUtils","Quaternion","radialDistanceTo","acos","abs","sphericalLinearInterpolation","t","cosHalfTheta","sqrSinHalfTheta","Number","EPSILON","s","sinHalfTheta","halfTheta","atan2","ratioA","sin","ratioB","rotateTowards","step","radialDistance","setFromVectors","vFrom","vTo","vFromNormalized","vToNormalized","quaternion2","delta","Entity","position","world","nearbyObject","maxSpeed","velocity","hasLookTarget","lookTarget","lookSpeed","lookDirection","isHidden","limitVelocity","speed","setPosition","desiredDirection","desiredQuaternion","setLookDirection","setLimitVelocity","setPositionAndSize","setSize","skipWorldUpdate","updateEntity","direction","onLookDirectionUpdated","executeForEachCloseEntity","func","getNearbyObjects","getEntityByID","setLookTarget","target","unsetLookTarget","isNearTo","entity","candidate","VERTEX_ENTITY_SIZE","Vertex","positionVector","graph","uuid","call","Object","create","defineProperty","enumerable","writable","World","nearby","entititesByID","gravity","setGravity","entityID","insertGraph","forEachVertex","vertex","insertEntity","vertexIDs","removeGraph","vertexID","removeEntity","hideEntity","onEntityHidden","showEntity","onEntityShown","nearbyBox","nearbyObj","lastWorldPosition","lastWorldSize","onEntityInserted","onEntityUpdated","onEntityLookDirectionUpdated","onEntityRemoved","forEachEntity","key","Path","options","jumpDescriptorLength","loop","rewind","isRewinding","isFinished","waypoints","jumpDescriptors","finishCallbacksByID","fixedLength","JSON","parse","stringify","cloned","addWaypoint","addJumpDescriptor","insertWaypoint","insertJumpDescriptor","restart","jumpDescriptor","takeoffPosition","landingPosition","takeoffIndex","getWaypointIndex","landingIndex","waypoint","findIndex","wp","getCurrentWaypoint","addFinishCallback","fn","removeFinishCallback","callbackID","onFinished","allCallbacks","getRandomWaypoint","floor","Edge","fromVertex","toVertex","cost","Graph","connections","totalVertexCount","addVertex","forEachEdge","edge","addEdge","findClosestVertexToPoint","pointVector","dist","closest","curDist","hasVertex","removeVertex","ary","to","splice","edges","removeEdge","forEachNeighbor","parseFloat","MinHeap","maxNodeCount","data","HEAP_CHECK_RESULT_OK","HEAP_CHECK_RESULT_LEFT","HEAP_CHECK_RESULT_RIGHT","reset","peek","getParentIndex","childIndex","getLeftChildIndex","rootIndex","getRightChildIndex","heapNode","curNodeIndex","curParentIndex","parent","priority","remove","node","indexOf","lastIndex","swap","reconstruct","heapCheck","root","leftIndex","rightIndex","left","right","index1","index2","val1","val2","pop","minData","heapCheckResult","hasNode","AStar","path","heapNodes","closedTag","parentTag","priorityTag","heap","_internalID","searchID","getHeapNode","nx","ny","isNodeBelongToVector","vector","generatePath","endVector","onPathConstructed","markNodeAsClosed","isNodeClosed","findShortestPath","fromVector","toVector","neighborVec","neighborHeapNode","heuristicCost","currentPriority","Logger","logMethod","console","log","isEnabled","lastMessageMap","enable","disable","component","msg","logger","LOGGER_COMPONENT_NAME","LOG_NOT_INSERTED_TO_WORLD","LOG_HAS_NO_BEHAVIOR","LOG_JUMP_COMPLETED","LOG_JUMP_READY","LOG_EQUATION_CANNOT_BE_SOLVED","LOG_JUMP_INITIATED","LOG_NO_JUMP_BEHAVIOR_SET","LOG_IS_HIDDEN","Steerable","hasTargetPosition","hasTargetEntity","hasHideTargetEntity","targetPosition","targetEntity","hideTargetEntity","linearAcceleration","maxAcceleration","isJumpInitiated","isJumpReady","isJumpTakenOff","jumpSpeed","jumpTime","behavior","steerResult","compute","linear","getEquationResult","time","onJumpCompleted","distToTakeoffPosition","takeoffPositionSatisfactionRadius","onJumpReady","setJumpBehavior","jumpBehavior","setBehavior","unsetTargetPosition","setTargetPosition","setTargetEntity","unsetTargetEntity","setHideTargetEntity","unsetHideTargetEntity","jump","toTakeoffBehavior","solveQuadraticEquation","cancelJump","onJumpTakeOff","equationResult","vx","vz","isCancel","jumpCompletionCallback","setJumpCompletionListener","callback","removeJumpCompletionListener","SteerResult","JumpDescriptor","parameters","checkTimeResult","isAchievable","cache","steerable","setCache","discriminant","discriminantSqrt","jumpTimeCandidate","checkTime","sq","SteeringBehavior","LOG_NO_TARGET_POSITION","LOG_SPEEDING_UP","SeekBehavior","LOG_ARRIVED","LOG_SLOWING_DOWN","ArriveBehavior","satisfactionRadius","slowDownRadius","toTarget","distance","targetVelocity","NO_THREATENING_ENTITY_FOUND","THREATENING_ENTITY_FOUND","AvoidBehavior","maxSeeAhead","maxAvoidForce","findMostThreateningObstacle","mostThreatening","curDistance","mostThreateningObstacle","BlendedSteeringBehavior","list","definitions","elem","weight","LOG_NO_TARGET_ENTITY","LOG_SEEKING","PursueBehavior","maxPredictionTime","predictionTime","tmpPredictionTime","LookWhereYouAreGoingBehavior","Wander2DBehavior","normal","wanderCircleDistance","wanderCircleRadius","angleChange","angle","circleCenter","getCircleCenter","displacementForce","getDisplacementForce","cos","quatdiff","Wander3DBehavior","wanderSphereDistance","angle2","wanderSphereRadius","FleeBehavior","EvadeBehavior","LOG_NO_WAYPOINT","LOG_NEXT_WAYPOINT","LOG_PATH_COMPLETED","PathFollowingBehavior","onJumpCompletionCallback","bind","getNext","currentWayPoint","isJumpNeeded","beforeJumpBehavior","quadraticEquationResult","landingPositionIndex","LOG_COMPUTED","LOG_NOT_COMPUTED","PrioritySteeringBehavior","threshold","LOG_NO_HIDE_TARGET_ENTITY","LOG_TARGET_ENTITY_OUT_OF_THREAT_DISTANCE","LOG_NO_HIDING_SPOT_FOUND","LOG_HIDING","HideBehavior","arriveSatisfactionRadius","arriveSlowDownRadius","hideDistance","threatDistance","hidingSpotFound","bestHidingSpot","findHidingSpot","excludeFromHide","hidingPosition","getHidingPosition","hideableEntity","hideableRadius","distanceAwayFromHideable","hideableEntityPosition","RandomWaypointBehavior","SeparationBehavior","strength","LOG_CLOSE_ENTITIES_EXIST","LOG_NO_CLOSE_ENTITIES_EXIST","AlignBehavior","count","CohesionBehavior","LOG_JUMP_NOT_READY","LOG_JUMP_ALREADY_TOOK_OFF","LOG_EQUATION_RESULT_TIME_ZERO","LOG_TAKING_OFF","LOG_MATCHING_VELOCITY","JumpBehavior","LOG_PATH_CONSTRUCTED","LOG_FOLLOWING_PATH","LOG_CLOSEST_POINT_NOT_FOUND","RandomPathBehavior","aStar","allVertices","isPathConstructed","constructPath","iterate","startPoint","endPoint","DebugHelper","threeInstance","scene","isActive","limeMaterial","MeshBasicMaterial","color","wireframe","magentaMaterial","redMaterial","orangeMaterial","lineMaterial","LineBasicMaterial","worldMesh","meshesByEntityID","velocityMeshesByEntityID","lookMeshesByEntityID","meshesByAStarIDs","meshesByJumpDescriptorIDs","visualisedAStars","pathMeshes","edgeMeshes","LOOK_DISTANCE","addEntity","mesh","velocityMesh","lookMesh","params","geometry","scale","visible","visualiseJumpDescriptor","p0","p3","p1","p2","curve","CubicBezierCurve3","points","getPoints","BufferGeometry","setFromPoints","jdMesh","Line","visualisePath","overrideSize","boxSize","meshes","waypointMesh","Mesh","BoxBufferGeometry","visualiseAStar","aStarPathVisualSize","visualiseGraph","geom","Geometry","vertices","line","createMeshFromEntity","lookPosition","activate","worldGeometry","deactivate","jdID","boxGeometry"],"mappings":"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"}